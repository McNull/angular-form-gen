{"version":3,"sources":["angular-form-gen-header.js","angular-form-gen.js","angular-form-gen-templates.js","common\\bind-expression.js","common\\fg-dropdown-input-directive.js","common\\fg-null-form.js","common\\fg-number-input-directive.js","common\\fg-placeholder-directive.js","common\\fg-utils.js","drag\\angular-drag-queen.js","drag\\dq-drag-area.js","drag\\dq-drag-track.js","drag\\dq-draggable.js","edit\\edit-controller.js","edit\\edit-directive.js","form\\form-controller.js","form\\form-directive.js","validation\\summary-directive.js","validation\\unique-field-name.js","common\\tabs\\tabs-controller.js","common\\tabs\\tabs-directive.js","common\\tabs\\tabs-pane-directive.js","common\\jsonify\\jsonify.js","edit\\canvas\\canvas-controller.js","edit\\canvas\\canvas-directive.js","edit\\palette\\palette-controller.js","edit\\palette\\palette-directive.js","form\\field\\field-controller.js","form\\field\\field-directive.js","form\\field\\field-focus-directive.js","form\\field\\field-input-directive.js","form\\form-fields\\form-fields-directive.js","form\\schema\\schema-controller.js","form\\schema\\schema-directive.js","edit\\canvas\\field\\field-directive.js","edit\\palette\\categories\\categories-controller.js","edit\\palette\\categories\\categories-directive.js","edit\\canvas\\field\\properties\\properties-directive.js","edit\\canvas\\field\\properties\\options\\options-controller.js","edit\\canvas\\field\\properties\\options\\options-directive.js","edit\\canvas\\field\\properties\\property-field\\common-directive.js","edit\\canvas\\field\\properties\\property-field\\field-value-directive.js","edit\\canvas\\field\\properties\\property-field\\property-field-directive.js","edit\\canvas\\field\\properties\\validation\\parse-pattern-directive.js","edit\\canvas\\field\\properties\\validation\\validation-directive.js","edit\\canvas\\field\\properties\\validation\\validation-message-directive.js","angular-form-gen-footer.js"],"names":[],"mappings":"AAAA;GACA;GACA;GACA;AACA;AACA;;ACLA;;AAEA;CACA;CACA;CACA;CACA;AACA;IACA;;IAEA;MACA;IACA;;IAEA;EACA;AACA;;AAEA,UAAA,aAAA;;EAEA,mBAAA,QAAA;;IAEA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;;IAEA;;IAEA;MACA;;MAEA;QACA;UACA;QACA;MACA;;MAEA;IACA;;IAEA;MACA;QACA;MACA;MACA;QACA;;UAEA;YACA;UACA;;UAEA;;UAEA;YACA;UACA;YACA;UACA;;UAEA;UACA;QACA;QACA;UACA;;UAEA;YACA;UACA;;UAEA;UACA;QACA;QACA;UACA;YACA;YACA;UACA;QACA;QACA;UACA;YACA;UACA;;UAEA;YACA;UACA;;UAEA;YACA;cACA;YACA;;YAEA;UACA;QACA;MACA;MACA;QACA;;UAEA;;UAEA;;YAEA;cACA;YACA;;YAEA;UACA;YACA;UACA;QACA;QACA;;UAEA;YACA;UACA;YACA;UACA;QACA;MACA;MACA;QACA;MACA;IACA;EACA;;AAEA,CAAA,CAAA;;AAEA,UAAA,gCAAA;;EAEA;EACA;EACA;;EAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;EAEA;EACA;EACA;;EAEA;IACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;IACA;IACA;MACA;MACA;QACA;QACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;QACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA;MACA;QACA;QACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;QACA;QACA;MACA;MACA;QACA;QACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;UACA;YACA;YACA;UACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;;EAGA;IACA;MACA;IACA;EACA;;EAEA;EACA;EACA;;EAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA,CAAA,CAAA;;ACnRA;AACA;AACA;AACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;IACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;IACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;AC7CA,cAAA,gBAAA,GAAA,iBAAA;;EAEA;IACA;IACA;IACA;;IAEA;MACA;;MAEA;QACA;MACA;IACA;;IAEA;EACA;;EAEA;;IAEA;;IAEA;MACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;MACA;QACA;;QAEA;;QAEA;;QAEA;;UAEA;;UAEA;;UAEA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA,CAAA,CAAA;;AC1DA,cAAA,eAAA,GAAA,2DAAA;;EAEA;;IAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;IAEA;IACA;;IAEA;;IAEA;;IAEA;MACA;QACA;MACA;IACA;;IAEA;IACA;;IAEA;AACA;MACA;IACA;;AAEA;AACA;AACA;AACA;AACA;;IAEA;MACA;MACA;IACA;;IAEA;EACA;;EAEA;;IAEA;IACA;;IAEA;MACA;MACA;MACA;MACA;MACA;MACA;;IAEA;;IAEA;;MAEA;;MAEA;;MAEA;;MAEA;;MAEA;QACA;QACA;;QAEA;UACA;QACA;MACA;;;MAGA;;MAEA;MACA;;MAEA;QACA;QACA;;QAEA;UACA;QACA;MACA;;MAEA;QACA;QACA;;QAEA;QACA;;MAEA;QACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;;IAEA;MACA;;QAEA;QACA;;QAEA;UACA;UACA;UACA;QACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;EACA;;EAEA;IACA;IACA;IACA;IACA;IACA;;MAEA;;QAEA;;QAEA;QACA;;QAEA;QACA;;QAEA;;QAEA;QACA;;QAEA;;QAEA;;QAEA;;QAEA;MACA;IACA;EACA;AACA,CAAA,CAAA;;AC5KA;CACA;CACA;AACA,cAAA,UAAA;;EAEA;IACA;IACA;IACA;IACA;IACA;EACA;;EAEA;IACA;IACA;IACA;;MAEA;;MAEA;;MAEA;;MAEA;;QAEA;;QAEA;MACA;;MAEA;;MAEA;IACA;EACA;AACA;;AAEA,cAAA,oBAAA;;EAEA;IACA;IACA;IACA;;MAEA;;MAEA;;MAEA;;QAEA;UACA;QACA;;QAEA;MACA;IACA;EACA;;AAEA;AC5DA,cAAA,aAAA;EACA;IACA;IACA;;MAEA;QACA;QACA;QACA;QACA;UACA;QACA;;QAEA;;QAEA;QACA;;QAEA;UACA;UACA;QACA;;QAEA;;MAEA;;MAEA;QACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;UACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;;QAEA;QACA;MACA;;MAEA;QACA;UACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;;QAEA;QACA;MACA;;MAEA;;QAEA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA;;ACtFA,cAAA,aAAA;EACA;IACA;IACA;GACA;EACA;IACA;MACA;QACA;MACA;IACA;EACA;AACA;ACZA,YAAA,OAAA,GAAA,0CAAA;;IAEA;;IAEA;MACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;;QAEA;QACA;;QAEA;;QAEA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;;QAEA;MACA;MACA;MACA;QACA;QACA;;QAEA;UACA;UACA;UACA;QACA;;QAEA;UACA;QACA;;QAEA;UACA;QACA;;QAEA;MACA;MACA;QACA;MACA;MACA;;QAEA;;QAEA;QACA;QACA;QACA;;QAEA;;QAEA;;UAEA;UACA;;UAEA;YACA;UACA;YACA;UACA;QACA;;QAEA;MACA;MACA;QACA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACA;;QAEA;UACA;QACA;;QAEA;UACA;YACA;YACA;cACA;YACA;YACA;cACA;YACA;UACA;QACA;;QAEA;MACA;IACA;EACA,CAAA,CAAA;ACjHA,kCAAA,OAAA,GAAA,0BAAA;;EAEA;;EAEA;EACA;IACA;MACA;IACA;IACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;IACA;IACA;MACA;QACA;MACA;MACA;IACA;IACA;MACA;MACA;MACA;IACA;IACA;MACA;MACA;;MAEA;IACA;EACA;AACA,CAAA,CAAA;ACvCA,gCAAA,UAAA,GAAA,YAAA;;EAEA;IACA;MACA;IACA;EACA;;EAEA;IACA;IACA;;MAEA;;MAEA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;QACA;MACA;IACA;EACA;AACA,CAAA,CAAA;;AC5BA,gCAAA,WAAA,EAAA,gBAAA;EACA;IACA;EACA;AACA,CAAA,CAAA,aAAA,WAAA,EAAA,gBAAA;IACA;MACA;IACA;EACA,CAAA,CAAA,aAAA,UAAA,EAAA,gBAAA;IACA;MACA;IACA;EACA,CAAA,CAAA,aAAA,MAAA,EAAA,gBAAA;IACA;MACA;IACA;EACA,CAAA,CAAA,WAAA,WAAA,GAAA,yBAAA;;IAEA;;IAEA;;MAEA;;MAEA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;UACA;;UAEA;;UAEA;;UAEA;;YAEA;;YAEA;;cAEA;;cAEA;YACA;UACA;;UAEA;;UAEA;;UAEA;UACA;;UAEA;;UAEA;;UAEA;;UAEA;QACA;;QAEA;UACA;UACA;UACA;YACA;cACA;gBACA;cACA;YACA;cACA;YACA;UACA;QACA;;QAEA;UACA;UACA;QACA;;QAEA;UACA;UACA;QACA;;QAEA;UACA;YACA;YACA;UACA;QACA;;QAEA;UACA;YACA;YACA;YACA;cACA;gBACA;cACA;YACA;UACA;QACA;;QAEA;UACA;;YAEA;YACA;;YAEA;YACA;;YAEA;YACA;UACA;QACA;;QAEA;QACA;;UAEA;;YAEA;;YAEA;YACA;;YAEA;cACA;gBACA;cACA;YACA;;YAEA;;YAEA;;YAEA;;cAEA;cACA;cACA;;cAEA;cACA;YACA;UACA;QACA;;QAEA;QACA;;UAEA;;UAEA;YACA;;YAEA;cACA;YACA;UACA;;UAEA;QACA;;QAEA;;QAEA;MACA;IACA;;EAEA,CAAA,CAAA;;ACpLA,gCAAA,WAAA,GAAA,0BAAA;;EAEA;IACA;MACA;;MAEA;QACA;QACA;MACA;;MAEA;;MAEA;IACA;EACA;;EAEA;IACA;IACA;;MAEA;MACA;;MAEA;QACA;QACA;MACA;;MAEA;;QAEA;;QAEA;UACA;UACA;UACA;QACA;MACA;;UAEA;;UAEA;YACA;UACA;;UAEA;UACA;UACA;;UAEA;YACA;UACA;;QAEA;;UAEA;YACA;UACA;;QAEA;IACA;EACA;;AAEA,CAAA,CAAA;AChEA,eAAA,gBAAA,GAAA,mCAAA;;EAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;EAEA;;IAEA;;IAEA;;IAEA;AACA;AACA;AACA;;MAEA;;MAEA;;QAEA;;QAEA;UACA;QACA;MACA;IACA;;EAEA;;AAEA,CAAA,CAAA;ACvCA,cAAA,MAAA;EACA;IACA;IACA;IACA;IACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;IACA;IACA,aAAA,4BAAA;IACA;IACA;;MAEA;QACA;MACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEA;MACA;IACA;EACA;AACA;ACtCA,eAAA,gBAAA,GAAA,qBAAA;;EAEA;EACA;;EAEA;IACA;;IAEA;;IAEA;IACA;;IAEA;MACA;QACA;;QAEA;UACA;QACA;MACA;;MAEA;IACA;;IAEA;MACA;IACA;MACA;QACA;MACA;QACA;MACA;IACA;;IAEA;;;IAGA;EACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAA,CAAA;;AC/CA,cAAA,MAAA,GAAA,oBAAA;EACA;IACA;IACA;IACA,aAAA,gBAAA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,YAAA;IACA;;MAEA;MACA;MACA;;MAEA;;MAEA;;IAEA;AACA,YAAA,eAAA,GAAA,iBAAA;EACA;;IAEA;;IAEA;;IAEA;MACA;MACA;IACA;;IAEA;EACA;AACA,CAAA,CAAA;;;AClCA,cAAA,mBAAA,GAAA,8BAAA;;EAEA;IACA;IACA;IACA;MACA;MACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,yBAAA,GAAA,aAAA;;EAEA;;IAEA;IACA;;IAEA;MACA;MACA;MACA;;IAEA;;MAEA;QACA;MACA;;MAEA;QACA;UACA;UACA;QACA;MACA;IACA;;IAEA;IACA;;IAEA;MACA;QACA;UACA;QACA;MACA;IACA;;IAEA;EACA;;AAEA,CAAA,CAAA;ACnDA,cAAA,iBAAA;;EAEA;;EAEA;;IAEA;IACA;IACA;;IAEA;;MAEA;;MAEA;QACA;QACA;UACA;UACA;QACA;MACA;IACA;;IAEA;EACA;;EAEA;IACA;IACA;IACA;;MAEA;MACA;;MAEA;;MAEA;QACA;MACA;;MAEA;;QAEA;QACA;;QAEA;MACA;;MAEA;;QAEA;QACA;;QAEA;MACA;IACA;EACA;AACA;;ACzDA,eAAA,gBAAA;;EAEA;EACA;;EAEA;IACA;;IAEA;MACA;IACA;;IAEA;MACA;IACA;EACA;;EAEA;;IAEA;MACA;IACA;;EAEA;;AAEA;;ACzBA,cAAA,MAAA;EACA;IACA;IACA;IACA;IACA,aAAA,gBAAA;IACA;IACA;MACA;IACA;IACA;MACA;IACA;EACA;AACA;;;;;ACdA,cAAA,UAAA,GAAA,qBAAA;EACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,gBAAA;EACA;;IAEA;;IAEA;MACA;MACA;MACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;EACA;AACA;;AC3BA;CACA;;CAEA;GACA;CACA;CACA;AACA;;AAEA,WAAA,IAAA;EACA;;IAEA;MACA;;IAEA;IACA;IACA;EACA;AACA,cAAA,OAAA,GAAA,uBAAA;IACA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;;QAEA;UACA;QACA;MACA;IACA;EACA,CAAA,CAAA;;ACnCA,eAAA,sBAAA,GAAA,6CAAA;;EAEA;IACA;IACA;EACA;;EAEA;EACA;EACA;;EAEA;IACA;EACA;;EAEA;IACA;EACA;;EAEA;AACA;IACA;IACA;EACA;;EAEA;IACA;EACA;;EAEA;;IAEA;;IAEA;MACA;IACA;;IAEA;EACA;;EAEA;;IAEA;;IAEA;MACA;AACA;IACA;;EAEA;;EAEA;;IAEA;;IAEA;;MAEA;MACA;MACA;MACA;;MAEA;QACA;;MAEA;QACA;;QAEA;QACA;MACA;;MAEA;MACA;IACA;MACA;IACA;EACA;;AAEA,CAAA,CAAA;AC/EA,cAAA,YAAA;;EAEA;IACA;IACA;IACA,aAAA,oCAAA;IACA;MACA;MACA;MACA;;MAEA;;MAEA;;QAEA;;QAEA;UACA;QACA;;QAEA;;MAEA;IACA;EACA;AACA;;AC1BA,eAAA,uBAAA,GAAA,uBAAA;;EAEA;;EAEA;;EAEA;IACA;EACA;;AAEA,CAAA,CAAA;ACVA,cAAA,aAAA;EACA;IACA;IACA;IACA,aAAA,uBAAA;IACA;MACA;IACA;EACA;AACA;ACTA,eAAA,iBAAA,GAAA,sBAAA;;EAEA;EACA;;EAEA;;IAEA;IACA;IACA;;IAEA;IACA;;EAEA;;EAEA;IACA;;IAEA;EACA;;EAEA;;IAEA;MACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;EACA;;EAEA;;IAEA;;IAEA;;IAEA;;MAEA;QACA;MACA;;MAEA;QACA;UACA;UACA;UACA;QACA;MACA;;IAEA;MACA;IACA;;IAEA;EACA;;EAEA;IACA;IACA;IACA;EACA;;EAEA;IACA;IACA;;IAEA;MACA;MACA;MACA;IACA;;IAEA;;EAEA;;EAEA;IACA;EACA;;EAEA;IACA;EACA;AACA,CAAA,CAAA;AC1FA,cAAA,OAAA,GAAA,kBAAA;;EAEA;IACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA,aAAA,iBAAA;IACA;EACA;;AAEA,CAAA,CAAA,WAAA,aAAA,GAAA,YAAA;EACA;;IAEA;IACA;;IAEA;MACA;IACA;;IAEA;;IAEA;EACA;AACA,CAAA,CAAA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA,cAAA,YAAA,GAAA,uBAAA;EACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,kBAAA;EACA;;IAEA;IACA;;IAEA;EACA;AACA,YAAA,eAAA;EACA;EACA;EACA;IACA;IACA;MACA;UACA;UACA;UACA;QACA;QACA;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;IACA;EACA;AACA;;AC1CA,cAAA,YAAA;;EAEA;IACA;IACA;IACA;IACA;IACA;;MAEA;;MAEA;QACA;MACA;QACA;MACA;IACA;EACA;;AAEA;ACnBA,eAAA,kBAAA,GAAA,sBAAA;;EAEA;;EAEA;IACA;MACA;;MAEA;QACA;MACA;IACA;;IAEA;EACA;;EAEA;;IAEA;;IAEA;IACA;;EAEA;;EAEA;IACA;EACA;;EAEA;IACA;MACA;IACA;;IAEA;EACA;;EAEA;IACA;MACA;MACA;MACA;IACA;EACA;;AAEA,CAAA,CAAA;AC7CA,cAAA,QAAA,GAAA,mBAAA;;EAEA;IACA;IACA,aAAA,kBAAA;IACA;EACA;;AAEA,CAAA,CAAA,WAAA,cAAA;EACA;IACA;;IAEA;MACA;IACA;;EAEA;AACA;;;ACjBA,cAAA,iBAAA;;EAEA;IACA;EACA;;AAEA;ACNA,eAAA,iCAAA,GAAA,uBAAA;;EAEA;;EAEA;IACA;IACA;EACA;;EAEA;IACA;IACA;MACA;MACA;MACA;IACA;EACA;AACA,CAAA,CAAA;ACjBA,cAAA,uBAAA;EACA;IACA;IACA;IACA;MACA;IACA;IACA,aAAA,iCAAA;EACA;AACA;ACTA,cAAA,2BAAA,GAAA,YAAA;;EAEA;;EAEA;IACA;;IAEA;MACA;;MAEA;;MAEA;QACA;MACA;IACA;EACA;;EAEA;IACA;IACA;MACA;IACA;IACA;MACA;QACA;MACA;MACA;;QAEA;UACA;QACA;;QAEA;;;QAGA;UACA;YACA;UACA;QACA;;MAEA;IACA;EACA;AACA,CAAA,CAAA;;AC7CA,eAAA,gCAAA,GAAA,WAAA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;IACA;MACA;QACA;UACA;YACA;UACA;QACA;MACA;IACA;EACA;;EAEA;;IAEA;IACA;IACA;;IAEA;MACA;QACA;QACA;MACA;QACA;UACA;QACA;MACA;IACA;EACA;;EAEA;;IAEA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;;IAEA;;IAEA;MACA;IACA;;EAEA;;EAEA;IACA;;IAEA;;MAEA;;MAEA;;QAEA;UACA;;MAEA;;QAEA;UACA;QACA;;QAEA;MACA;IACA;EACA;;AAEA,CAAA,CAAA;AClFA,cAAA,sBAAA,GAAA,iCAAA;EACA;IACA;IACA,aAAA,+CAAA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,4BAAA;EACA;;IAEA;;IAEA;MACA;QACA;MACA;IACA;EACA;AACA;AClBA,cAAA,qBAAA,GAAA,gCAAA;EACA;IACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,2BAAA;EACA;;IAEA;MACA;MACA;MACA;MACA;MACA;IACA;;IAEA;MACA;IACA;EACA;AACA;ACrBA;MACA;MACA;MACA;;MAEA;;MAEA;QACA;eACA;eACA;eACA;eACA;eACA;MACA;;MAEA;CACA;;AAEA,cAAA,oBAAA,GAAA,+BAAA;;EAEA;IACA;IACA;IACA;IACA;EACA;;AAEA,CAAA,CAAA,WAAA,0BAAA,GAAA,WAAA;;EAEA;;IAEA;IACA;IACA;;IAEA;;MAEA;;QAEA;;QAEA;UACA;QACA;;QAEA;QACA;MACA;QACA;QACA;MACA;IACA;;IAEA;MACA;QACA;QACA;QACA;MACA;IACA;EACA;AACA,CAAA,CAAA,aAAA,aAAA;EACA;IACA;IACA;;MAEA;;MAEA;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA;;AC7EA,cAAA,eAAA,GAAA,0BAAA;;EAEA;IACA;IACA;IACA;IACA;IACA;EACA;;AAEA,CAAA,CAAA,WAAA,qBAAA;EACA;;IAEA;MACA;IACA;;IAEA;MACA;QACA;MACA;IACA;;EAEA;AACA;ACxBA,cAAA,cAAA;;EAEA;IACA;IACA;MACA;;MAEA;;MAEA;QACA;UACA;QACA;UACA;UACA;QACA;;QAEA;QACA;MACA;IACA;EACA;AACA;ACtBA,cAAA,yBAAA,GAAA,oCAAA;EACA;IACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,+BAAA,GAAA,aAAA;;EAEA;EACA;;EAEA;IACA;EACA;;EAEA;;IAEA;;IAEA;IACA;;IAEA;MACA;MACA;MACA;MACA;IACA;;IAEA;MACA;IACA;EACA;AACA,CAAA,CAAA;ACjCA,cAAA,uBAAA,GAAA,kCAAA;EACA;IACA;IACA;IACA;EACA;AACA,CAAA,CAAA,WAAA,6BAAA;;EAEA;;EAEA;IACA;MACA;IACA;;IAEA;MACA;MACA;IACA;EACA;AACA;ACpBA","file":"angular-form-gen.js","sourcesContent":["/*!\n   angular-form-gen v0.0.3\n   (c) 2014 (null) McNull https://github.com/McNull/angular-form-gen\n   License: MIT\n*/\n(function(angular) {\n","var fg = angular.module('fg', ['dq']);\r\n\r\n/**\r\n * Constructor for form-gen Field types.\r\n * @param {string} type         Indicates the type of field\r\n * @param {object} properties   [optional] Initial property values\r\n */\r\nfg.constant('FgField', function FgField(type, properties) {\r\n    this.name = this.type = type;\r\n\r\n    if (properties) {\r\n      angular.extend(this, properties);\r\n    }\r\n\r\n    this.displayName = this.displayName || this.type.charAt(0).toUpperCase() + this.type.substring(1);\r\n  }\r\n);\r\n\r\nfg.config(function ($provide) {\r\n\r\n  $provide.provider('fgConfig', function () {\r\n\r\n    var config = {\r\n      enableDebugInfo: true,\r\n      validation: {\r\n        messages: {},\r\n        patterns: {}\r\n      },\r\n      fields: {\r\n        templates: [],\r\n        categories: {},\r\n        renderInfo: {}\r\n      }\r\n    };\r\n\r\n    var templates = config.fields.templates;\r\n\r\n    function indexOfTemplate(type) {\r\n      var idx = templates.length;\r\n\r\n      while (idx--) {\r\n        if (templates[idx].type === type) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      return idx;\r\n    }\r\n\r\n    return {\r\n      debug: function (value) {\r\n        config.enableDebugInfo = value;\r\n      },\r\n      fields: {\r\n        add: function (objectTemplate, categories, templateUrl, propertiesTemplateUrl) {\r\n\r\n          if (!objectTemplate || !objectTemplate.type || !categories || !categories.length) {\r\n            throw new Error('Need a valid objectTemplate and at least one category');\r\n          }\r\n\r\n          var idx = indexOfTemplate(objectTemplate.type);\r\n\r\n          if (idx !== -1) {\r\n            templates[idx] = objectTemplate;\r\n          } else {\r\n            templates.push(objectTemplate);\r\n          }\r\n\r\n          this.category(objectTemplate.type, categories);\r\n          this.renderInfo(objectTemplate.type, templateUrl, propertiesTemplateUrl);\r\n        },\r\n        remove: function (type) {\r\n          var idx = indexOfTemplate(type);\r\n\r\n          if (idx !== -1) {\r\n            templates.splice(idx, 1);\r\n          }\r\n\r\n          this.category(type);\r\n          this.renderInfo(type);\r\n        },\r\n        renderInfo: function (fieldType, templateUrl, propertiesTemplateUrl) {\r\n          config.fields.renderInfo[fieldType] = {\r\n            templateUrl: templateUrl,\r\n            propertiesTemplateUrl: propertiesTemplateUrl\r\n          };\r\n        },\r\n        category: function (fieldType, categories) {\r\n          if (!angular.isArray(categories)) {\r\n            categories = [categories];\r\n          }\r\n\r\n          angular.forEach(config.fields.categories, function (category) {\r\n            delete category[fieldType];\r\n          });\r\n\r\n          angular.forEach(categories, function (category) {\r\n            if (config.fields.categories[category] === undefined) {\r\n              config.fields.categories[category] = {};\r\n            }\r\n\r\n            config.fields.categories[category][fieldType] = true;\r\n          });\r\n        }\r\n      },\r\n      validation: {\r\n        message: function (typeOrObject, message) {\r\n\r\n          var messages = config.validation.messages;\r\n\r\n          if (angular.isString(typeOrObject)) {\r\n\r\n            if (!message) {\r\n              throw new Error('No message specified for ' + typeOrObject);\r\n            }\r\n\r\n            messages[typeOrObject] = message;\r\n          } else {\r\n            angular.extend(messages, typeOrObject);\r\n          }\r\n        },\r\n        pattern: function (nameOrObject, pattern) {\r\n\r\n          if (angular.isString(nameOrObject)) {\r\n            config.validation.patterns[name] = pattern;\r\n          } else {\r\n            angular.extend(config.validation.patterns, nameOrObject);\r\n          }\r\n        }\r\n      },\r\n      $get: function () {\r\n        return config;\r\n      }\r\n    };\r\n  });\r\n\r\n});\r\n\r\nfg.config(function (fgConfigProvider, FgField) {\r\n\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n  // Messages\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n  fgConfigProvider.validation.message({\r\n    required: 'A value is required for this field.',\r\n    minlength: 'The value does not match the minimum length{{ field.schema && (\" of \" + field.schema.validation.minlength + \" characters\" || \"\")}}.',\r\n    maxlength: 'The value exceeds the maximum length{{ field.schema && (\" of \" + field.schema.validation.maxlength + \" characters\" || \"\")}}.',\r\n    pattern: 'The value \"{{ field.state.$viewValue }}\" does not match the required format.',\r\n    email: 'The value \"{{ field.state.$viewValue }}\" is not a valid email address.',\r\n    unique: 'The value \"{{ field.state.$viewValue }}\" is already in use.',\r\n    number: 'The value \"{{ field.state.$viewValue }}\" is not a number.',\r\n    min: 'The value {{ field.schema && (\"should be at least \" + field.schema.validation.min) || field.state.$viewValue + \" is too low\" }}',\r\n    max: 'The value {{ field.schema && (\"should be less than \" + field.schema.validation.max) || field.state.$viewValue + \" is too high\" }}'\r\n  });\r\n\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n  // Fields\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n  var categories = {\r\n    'Text input fields': [\r\n      new FgField('text', {\r\n        displayName: 'Textbox'\r\n      }),\r\n      new FgField('email'),\r\n      new FgField('number', {\r\n        validation: { maxlength: 15 /* to prevent > Number.MAX_VALUE */ }\r\n      }),\r\n      new FgField('password'),\r\n      new FgField('textarea')\r\n    ],\r\n    'Checkbox fields': [\r\n      new FgField('checkbox', { nolabel: true }),\r\n      new FgField('checkboxlist', {\r\n        displayName: 'Checkbox List',\r\n        options: [\r\n          {\r\n            value: '1',\r\n            text: 'Option 1'\r\n          },\r\n          {\r\n            value: '2',\r\n            text: 'Option 2'\r\n          },\r\n          {\r\n            value: '3',\r\n            text: 'Option 3'\r\n          }\r\n        ],\r\n        value: {\r\n          '1': true,\r\n          '2': true\r\n        }\r\n      })\r\n    ],\r\n    'Select input fields': [\r\n      new FgField('radiobuttonlist', {\r\n        displayName: 'Radiobutton List',\r\n        options: [\r\n          {\r\n            value: '1',\r\n            text: 'Option 1'\r\n          },\r\n          {\r\n            value: '2',\r\n            text: 'Option 2'\r\n          },\r\n          {\r\n            value: '3',\r\n            text: 'Option 3'\r\n          }\r\n        ],\r\n        value: '1'\r\n      }),\r\n      new FgField('selectlist', {\r\n        displayName: 'Select List',\r\n        options: [\r\n          {\r\n            value: '1',\r\n            text: 'Option 1'\r\n          },\r\n          {\r\n            value: '2',\r\n            text: 'Option 2'\r\n          },\r\n          {\r\n            value: '3',\r\n            text: 'Option 3'\r\n          }\r\n        ],\r\n        value: '1'\r\n      }) // ,\r\n      // new FgField('dropdownlist', {\r\n      //   options: [{\r\n      //     value: '1',\r\n      //     text: 'Option 1'\r\n      //   }, {\r\n      //     value: '2',\r\n      //     text: 'Option 2'\r\n      //   }, {\r\n      //     value: '3',\r\n      //     text: 'Option 3'\r\n      //   }],\r\n      //   value: '1'\r\n      // })\r\n    ]\r\n  };\r\n\r\n\r\n  angular.forEach(categories, function (fields, category) {\r\n    angular.forEach(fields, function (field) {\r\n      fgConfigProvider.fields.add(field, category /*, templateUrl, propertiesTemplateUrl */);\r\n    });\r\n  });\r\n\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n  // Patterns\r\n  // - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n  fgConfigProvider.validation.pattern({\r\n    'None': undefined,\r\n    'Url': '^(https?:\\\\/\\\\/)?([\\\\da-z\\\\.-]+)\\\\.([a-z\\\\.]{2,6})([\\\\/\\\\w \\\\.-]*)*\\\\/?$',\r\n    'Domain': '^([a-z][a-z0-9\\\\-]+(\\\\.|\\\\-*\\\\.))+[a-z]{2,6}$',\r\n    'IPv4 Address': '^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$',\r\n    'Email Address': '^([a-z0-9_\\\\.-]+)@([\\\\da-z\\\\.-]+)\\\\.([a-z\\\\.]{2,6})$',\r\n    'Integer': '^-{0,1}\\\\d+$',\r\n    'Positive Integers': '^\\\\d+$',\r\n    'Negative Integers': '^-\\\\d+$',\r\n    'Number': '^-{0,1}\\\\d*\\\\.{0,1}\\\\d+$',\r\n    'Positive Number': '^\\\\d*\\\\.{0,1}\\\\d+$',\r\n    'Negative Number': '^-\\\\d*\\\\.{0,1}\\\\d+$',\r\n    'Year (1920-2099)': '^(19|20)[\\\\d]{2,2}$',\r\n    'Password': '(?=.*\\\\d)(?=.*[!@#$%^&*\\\\-=()|?.\\\"\\';:]+)(?![.\\\\n])(?=.*[A-Z])(?=.*[a-z]).*$'\r\n  });\r\n});\r\n","// ATTENTION!\n// DO NOT MODIFY THIS FILE BECAUSE IT WAS GENERATED AUTOMATICALLY\n// SO ALL YOUR CHANGES WILL BE LOST THE NEXT TIME THE FILE IS GENERATED\nangular.module('fg').run(['$templateCache', function($templateCache){\n  $templateCache.put('angular-form-gen/edit/edit.ng.html', '<div class=\\\"fg-edit row form-group\\\" ng-form=\\\"$fg\\\"><div class=\\\"col-sm-8\\\"><div fg-form=\\\"\\\" fg-edit-canvas=\\\"\\\" fg-no-render=\\\"true\\\"></div></div><div class=\\\"col-sm-4\\\" ng-form=\\\"$palette\\\" fg-null-form=\\\"\\\"><div fg-form=\\\"\\\" fg-edit-palette=\\\"\\\" fg-no-render=\\\"true\\\"></div></div></div>');\n  $templateCache.put('angular-form-gen/validation/summary.ng.html', '<ul class=\\\"fg-validation-summary help-block unstyled\\\" ng-if=\\\"field.state.$invalid && field.state.$dirty\\\"><li ng-repeat=\\\"(key, error) in field.state.$error\\\" ng-if=\\\"error\\\" fg-bind-expression=\\\"messages[key]\\\"></li></ul>');\n  $templateCache.put('angular-form-gen/common/jsonify/jsonify.ng.html', '<div class=\\\"jsonify\\\"><div class=\\\"btn-toolbar btn-toolbar-right\\\"><button class=\\\"btn btn-default btn-xs\\\" type=\\\"button\\\" title=\\\"Copy the json data.\\\" ng-click=\\\"copy()\\\"><span class=\\\"glyphicon glyphicon-transfer\\\"></span></button> <button class=\\\"btn btn-default btn-xs\\\" type=\\\"button\\\" title=\\\"Display hidden properties.\\\" ng-click=\\\"displayHidden = !displayHidden\\\" ng-class=\\\"{ \\'active\\': displayHidden }\\\"><span class=\\\"glyphicon glyphicon-eye-open\\\"></span></button></div><pre><code>{{ jsonify | j$on:displayHidden }}</code></pre></div>');\n  $templateCache.put('angular-form-gen/common/tabs/tabs-pane.ng.html', '<div class=\\\"fg-tabs-pane\\\" ng-show=\\\"tabs.active === pane\\\"><div ng-if=\\\"tabs.active === pane || pane.renderAlways\\\" ng-transclude=\\\"\\\"></div></div>');\n  $templateCache.put('angular-form-gen/common/tabs/tabs.ng.html', '<div class=\\\"fg-tabs tabbable\\\"><ul class=\\\"nav nav-tabs\\\"><li ng-repeat=\\\"tab in tabs.items\\\" ng-class=\\\"{ active: tab === tabs.active, disabled: tab.disabled }\\\"><a href=\\\"\\\" ng-click=\\\"tabs.activate(tab)\\\">{{ tab.title }}</a></li></ul><div class=\\\"tab-content\\\" ng-transclude=\\\"\\\"></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/canvas.ng.html', '<div class=\\\"fg-edit-canvas\\\" ng-class=\\\"{ \\'fg-edit-canvas-dragging\\': dragging }\\\"><fieldset><legend>Canvas</legend><div class=\\\"fg-edit-canvas-area\\\" dq-drag-area=\\\"fg-edit-canvas\\\" dq-drag-enter=\\\"canvasCtrl.dragEnter()\\\" dq-drag-leave=\\\"canvasCtrl.dragLeave()\\\" dq-drop=\\\"canvasCtrl.drop()\\\"><div ng-if=\\\"!(schema.fields.length)\\\"><div ng-if=\\\"!dragPlaceholder.visible\\\" class=\\\"fg-edit-canvas-area-empty alert alert-info text-center\\\"><p class=\\\"fg-edit-canvas-area-empty-x\\\">X</p><p class=\\\"lead hidden-phone\\\"><strong>Drag</strong> one of the available <strong>templates</strong> from the <strong>palette</strong> onto this <strong>canvas</strong>.</p></div></div><div ng-repeat=\\\"field in schema.fields\\\"><div ng-class=\\\"{ \\'fg-drag-placeholder-visible\\' : dragPlaceholder.visible && dragPlaceholder.index === $index }\\\" class=\\\"fg-drag-placeholder\\\"></div><div fg-edit-canvas-field=\\\"\\\"></div></div><div ng-class=\\\"{ \\'fg-drag-placeholder-visible\\': dragPlaceholder.visible && dragPlaceholder.index == schema.fields.length }\\\" class=\\\"fg-drag-placeholder\\\"></div></div></fieldset></div>');\n  $templateCache.put('angular-form-gen/edit/palette/palette.ng.html', '<div class=\\\"fg-edit-palette\\\"><fieldset><div fg-edit-palette-categories=\\\"\\\" data-category=\\\"selectedCategory\\\"></div><div ng-repeat=\\\"template in templates | filter:templateFilter\\\" class=\\\"fg-field\\\" dq-draggable=\\\"fg-edit-canvas\\\" dq-drag-begin=\\\"{ source: \\'palette\\', field: template }\\\"><div class=\\\"fg-field-overlay\\\"><div class=\\\"btn-toolbar btn-toolbar-right\\\"><button class=\\\"btn btn-default btn-xs btn-primary\\\" type=\\\"button\\\" ng-click=\\\"schemaCtrl.addField(template)\\\" title=\\\"Add this field.\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></button></div></div><div fg-field=\\\"template\\\" fg-tab-index=\\\"-1\\\" fg-no-validation-summary=\\\"true\\\" fg-edit-mode=\\\"true\\\"></div></div></fieldset></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/checkbox.ng.html', '<div class=\\\"checkbox\\\"><label title=\\\"{{ field.schema.tooltip }}\\\"><input fg-field-input=\\\"\\\" id=\\\"{{ field.$_id }}\\\" type=\\\"checkbox\\\" tabindex=\\\"{{ tabIndex }}\\\" ng-model=\\\"form.data[field.schema.name]\\\"> <span ng-if=\\\"field.schema.nolabel\\\">{{ field.schema.displayName }}</span></label></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/checkboxlist.ng.html', '<div class=\\\"checkbox\\\" ng-repeat=\\\"option in field.schema.options\\\"><label title=\\\"{{ field.schema.tooltip }}\\\"><input fg-field-input=\\\"\\\" type=\\\"checkbox\\\" tabindex=\\\"{{ tabIndex }}\\\" name=\\\"{{ field.schema.name }}[]\\\" value=\\\"{{ option.value }}\\\" ng-model=\\\"form.data[field.schema.name][option.value]\\\"> <span>{{option.text || option.value}}</span></label></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/dropdownlist.ng.html', '<div fg-field-input=\\\"\\\" fg-dropdown-input=\\\"field.schema.options\\\" title=\\\"{{ field.schema.tooltip }}\\\" id=\\\"{{ field.$_id }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" tabindex=\\\"{{ tabIndex }}\\\" placeholder=\\\"{{ field.schema.placeholder }}\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" ng-disabled=\\\"isDisabled(field.schema)\\\"></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/email.ng.html', '<input class=\\\"form-control\\\" fg-field-input=\\\"\\\" fg-update-pattern=\\\"\\\" type=\\\"email\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" tabindex=\\\"{{ tabIndex }}\\\" placeholder=\\\"{{ field.schema.placeholder }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" ng-disabled=\\\"isDisabled(field.schema)\\\">');\n  $templateCache.put('angular-form-gen/field-templates/default/not-in-cache.ng.html', '<div class=\\\"fg-field-not-in-cache alert alert-error\\\"><p>No template registered in cache for field type \\\"{{ field.type }}\\\".</p></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/number.ng.html', '<input class=\\\"form-control\\\" fg-field-input=\\\"\\\" fg-input-number=\\\"\\\" type=\\\"text\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" tabindex=\\\"{{ tabIndex }}\\\" placeholder=\\\"{{ field.schema.placeholder }}\\\" min=\\\"{{ field.schema.validation.min }}\\\" max=\\\"{{ field.schema.validation.max }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" ng-disabled=\\\"isDisabled(field.schema)\\\">');\n  $templateCache.put('angular-form-gen/field-templates/default/password.ng.html', '<input class=\\\"form-control\\\" fg-field-input=\\\"\\\" type=\\\"password\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" tabindex=\\\"{{ tabIndex }}\\\" placeholder=\\\"{{ field.schema.placeholder }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" ng-disabled=\\\"isDisabled(field.schema)\\\">');\n  $templateCache.put('angular-form-gen/field-templates/default/radiobuttonlist.ng.html', '<div class=\\\"radio\\\" ng-repeat=\\\"option in field.schema.options\\\"><label title=\\\"{{ field.schema.tooltip }}\\\"><input fg-field-input=\\\"\\\" type=\\\"radio\\\" name=\\\"{{ field.schema.name }}[]\\\" tabindex=\\\"{{ tabIndex }}\\\" value=\\\"{{ option.value }}\\\" ng-model=\\\"form.data[field.schema.name]\\\"> <span>{{option.text || option.value}}</span></label></div>');\n  $templateCache.put('angular-form-gen/field-templates/default/selectlist.ng.html', '<select class=\\\"form-control\\\" fg-field-input=\\\"\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" tabindex=\\\"{{ tabIndex }}\\\"><option ng-repeat=\\\"option in field.schema.options\\\" value=\\\"{{ option.value }}\\\" ng-selected=\\\"form.data[field.schema.name] === option.value\\\">{{ option.text || option.value }}</option></select>');\n  $templateCache.put('angular-form-gen/field-templates/default/text.ng.html', '<input class=\\\"form-control\\\" fg-field-input=\\\"\\\" fg-update-pattern=\\\"\\\" type=\\\"text\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" tabindex=\\\"{{ tabIndex }}\\\" placeholder=\\\"{{ field.schema.placeholder }}\\\" ng-model=\\\"form.data[field.schema.name]\\\" ng-required=\\\"field.schema.validation.required\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" ng-disabled=\\\"isDisabled(field.schema)\\\">');\n  $templateCache.put('angular-form-gen/field-templates/default/textarea.ng.html', '<textarea class=\\\"form-control\\\" fg-field-input=\\\"\\\" fg-placeholder=\\\"field.schema.placeholder\\\" ng-model=\\\"form.data[field.schema.name]\\\" id=\\\"{{ field.$_id }}\\\" title=\\\"{{ field.schema.tooltip }}\\\" tabindex=\\\"{{ tabIndex }}\\\" ng-required=\\\"field.schema.validation.required\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\" <=\\\"\\\" textarea=\\\"\\\">\\n' +\n    '</textarea>');\n  $templateCache.put('angular-form-gen/field-templates/properties/checkbox.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, tooltip: true }\\\"></div><div fg-property-field=\\\"fieldValue\\\"><div class=\\\"checkbox\\\"><label title=\\\"Set the initial value of this field.\\\"><input type=\\\"checkbox\\\" name=\\\"fieldValue\\\" ng-model=\\\"field.value\\\"> Initial value</label></div></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/checkboxlist.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, tooltip: true }\\\"></div></div><div fg-tabs-pane=\\\"Options\\\"><div fg-property-field-options=\\\"multiple\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/dropdownlist.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><div fg-field-input=\\\"\\\" fg-update-pattern=\\\"\\\" fg-dropdown-input=\\\"field.options\\\" ng-model=\\\"field.value\\\" ng-minlength=\\\"{{ field.schema.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.schema.validation.maxlength }}\\\" ng-pattern=\\\"field.schema.validation.pattern\\\"></div></div></div><div fg-tabs-pane=\\\"Validation\\\"><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/email.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><input fg-update-pattern=\\\"\\\" type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"fieldValue\\\" ng-model=\\\"field.value\\\" ng-minlength=\\\"{{ field.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.validation.maxlength }}\\\" ng-pattern=\\\"field.validation.pattern\\\"></div></div><div fg-tabs-pane=\\\"Validation\\\"><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/number.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><input fg-input-number=\\\"\\\" fg-update-pattern=\\\"\\\" class=\\\"form-control\\\" type=\\\"text\\\" name=\\\"fieldValue\\\" ng-model=\\\"field.value\\\" min=\\\"{{ field.validation.min }}\\\" max=\\\"{{ field.validation.max }}\\\" ng-minlength=\\\"{{ field.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.validation.maxlength }}\\\" ng-pattern=\\\"field.validation.pattern\\\"></div></div><div fg-tabs-pane=\\\"Validation\\\"><div class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"min\\\" fg-property-field-label=\\\"Minimum value\\\"><input fg-input-number=\\\"\\\" fg-field-redraw=\\\"\\\" class=\\\"form-control\\\" type=\\\"text\\\" name=\\\"min\\\" title=\\\"The minimum value that should be entered\\\" ng-model=\\\"field.validation.min\\\"></div><div ng-if=\\\"field.validation.min >= 0\\\"><div fg-edit-validation-message=\\\"min\\\"></div></div></div><div class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"max\\\" fg-property-field-label=\\\"Maximum value\\\"><input fg-input-number=\\\"\\\" fg-field-redraw=\\\"\\\" class=\\\"form-control\\\" type=\\\"text\\\" name=\\\"max\\\" title=\\\"The maximum value that should be entered\\\" ng-model=\\\"field.validation.max\\\"></div><div ng-if=\\\"field.validation.max >= 0\\\"><div fg-edit-validation-message=\\\"max\\\"></div></div></div><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/password.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><input fg-input-number=\\\"\\\" class=\\\"form-control\\\" type=\\\"password\\\" name=\\\"fieldValue\\\" ng-model=\\\"field.value\\\" ng-minlength=\\\"{{ field.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.validation.maxlength }}\\\" ng-pattern=\\\"/{{ field.validation.pattern }}/\\\"></div></div><div fg-tabs-pane=\\\"Validation\\\"><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/radiobuttonlist.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, tooltip: true }\\\"></div></div><div fg-tabs-pane=\\\"Options\\\"><div fg-property-field-options=\\\"\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/selectlist.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, tooltip: true }\\\"></div></div><div fg-tabs-pane=\\\"Options\\\"><div fg-property-field-options=\\\"\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/text.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><input fg-update-pattern=\\\"\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"fieldValue\\\" ng-model=\\\"field.value\\\" ng-minlength=\\\"{{ field.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.validation.maxlength }}\\\" ng-pattern=\\\"field.validation.pattern\\\"></div></div><div fg-tabs-pane=\\\"Validation\\\"><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/field-templates/properties/textarea.ng.html', '<div fg-tabs-pane=\\\"Properties\\\"><div fg-property-field-common=\\\"{ fieldname: true, displayname: true, placeholder: true, tooltip: true }\\\"></div><div fg-property-field-value=\\\"\\\"><textarea fg-update-pattern=\\\"\\\" name=\\\"fieldValue\\\" class=\\\"form-control\\\" ng-model=\\\"field.value\\\" ng-minlength=\\\"{{ field.validation.minlength }}\\\" ng-maxlength=\\\"{{ field.validation.maxlength }}\\\" ng-pattern=\\\"field.validation.pattern\\\">\\n' +\n    '    </textarea></div></div><div fg-tabs-pane=\\\"Validation\\\"><div fg-property-field-validation=\\\"{ required: true, minlength: true, maxlength: true, pattern: true }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/form/field/field.ng.html', '<div class=\\\"fg-field-inner form-group\\\" ng-class=\\\"{ \\'fg-field-required\\': fieldSchema.validation.required, \\'has-error\\': form.state[field.name].$invalid }\\\"><label ng-if=\\\"!field.schema.nolabel\\\" class=\\\"col-sm-3 control-label\\\" for=\\\"{{ field.$_id }}\\\">{{ fieldSchema.displayName }}</label><div class=\\\"col-sm-9\\\" ng-class=\\\"{ \\'col-sm-offset-3\\': field.schema.nolabel }\\\"><div ng-include=\\\"renderInfo.templateUrl\\\"></div><div fg-validation-summary=\\\"\\\" fg-validation-messages=\\\"fieldSchema.validation.messages\\\" ng-if=\\\"!noValidationSummary\\\"></div></div></div>');\n  $templateCache.put('angular-form-gen/form/form-fields/form-fields.ng.html', '<div class=\\\"fg-form-fields\\\"><fieldset><div ng-repeat=\\\"field in form.schema.fields\\\"><div fg-field=\\\"field\\\"></div></div></fieldset></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/field.ng.html', '<div class=\\\"fg-field fg-field-{{ field.type }} fg-edit-canvas-field\\\" ng-class=\\\"{ \\'error\\': field.$$_invalid, \\'dragging\\': field.$_isDragging }\\\" dq-draggable=\\\"fg-edit-canvas\\\" dq-drag-disabled=\\\"dragEnabled === false\\\" dq-drag-begin=\\\"canvasCtrl.dragBeginCanvasField($index, field)\\\" dq-drag-end=\\\"canvasCtrl.dragEndCanvasField(field)\\\"><div class=\\\"fg-field-overlay\\\" ng-mouseenter=\\\"dragEnabled = true\\\" ng-mouseleave=\\\"dragEnabled = false\\\"><div class=\\\"fg-field-overlay-drag-top\\\" dq-drag-enter=\\\"dragPlaceholder.index = $index\\\"></div><div class=\\\"fg-field-overlay-drag-bottom\\\" dq-drag-enter=\\\"dragPlaceholder.index = ($index + 1)\\\"></div><div class=\\\"btn-toolbar btn-toolbar-right\\\"><button class=\\\"btn btn-default btn-xs\\\" type=\\\"button\\\" ng-class=\\\"{ \\'active\\': field.$_displayProperties }\\\" ng-click=\\\"field.$_displayProperties = !field.$_displayProperties\\\" title=\\\"Configure this field.\\\"><span class=\\\"glyphicon glyphicon-wrench\\\"></span></button> <button class=\\\"btn btn-default btn-xs\\\" type=\\\"button\\\" ng-click=\\\"schemaCtrl.swapFields($index - 1, $index)\\\" ng-disabled=\\\"$index === 0\\\" title=\\\"Move up\\\"><span class=\\\"glyphicon glyphicon-arrow-up\\\"></span></button> <button class=\\\"btn btn-default btn-xs\\\" type=\\\"button\\\" ng-click=\\\"schemaCtrl.swapFields($index, $index + 1)\\\" ng-disabled=\\\"$index === schema.fields.length - 1\\\" title=\\\"Move down\\\"><span class=\\\"glyphicon glyphicon-arrow-down\\\"></span></button> <button class=\\\"btn btn-default btn-xs btn-danger\\\" type=\\\"button\\\" ng-click=\\\"schemaCtrl.removeField($index)\\\" title=\\\"Remove\\\"><span class=\\\"glyphicon glyphicon-trash\\\"></span></button></div></div><div ng-form=\\\"\\\" fg-form-required-filter=\\\"\\\"><div fg-field=\\\"field\\\" fg-tab-index=\\\"-1\\\" fg-edit-mode=\\\"true\\\" fg-no-validation-summary=\\\"true\\\"></div></div><div fg-edit-canvas-field-properties=\\\"field\\\" class=\\\"fg-field-properties-container\\\" ng-class=\\\"{ visible: field.$_displayProperties }\\\"></div></div>');\n  $templateCache.put('angular-form-gen/edit/palette/categories/categories.ng.html', '<legend ng-click=\\\"paletteCategoriesMenuOpen = !paletteCategoriesMenuOpen\\\" ng-class=\\\"{ \\'open\\': paletteCategoriesMenuOpen }\\\">Palette <span class=\\\"fg-legend-extra fg-edit-palette-categories visible-xs-inline visible-md-inline visible-lg-inline\\\">- {{ categoryName || \\'All field types\\' }}</span> <i class=\\\"caret\\\"></i><ul class=\\\"dropdown-menu\\\"><li ng-repeat=\\\"(name, category) in categories\\\" ng-class=\\\"{ \\'active\\': categoryName === name }\\\"><a ng-click=\\\"setCategory(name, category)\\\">{{ name }}</a></li><li class=\\\"divider\\\"></li><li ng-class=\\\"{ \\'active\\': !category }\\\"><a ng-click=\\\"setCategory(null)\\\">All field types</a></li></ul></legend>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/properties.ng.html', '<div class=\\\"fg-field-properties\\\"><div novalidate=\\\"\\\" ng-form=\\\"fieldPropertiesForm\\\"><div fg-tabs=\\\"property.tabs\\\"><div ng-include=\\\"renderInfo.propertiesTemplateUrl\\\"></div><div fg-tabs-pane=\\\"Debug\\\" order=\\\"1000\\\" auto-active=\\\"false\\\"><div data-jsonify=\\\"field\\\"></div></div></div></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/options/options.ng.html', '<div ng-if=\\\"!field.options || field.options.length === 0\\\" ng-click=\\\"optionsCtrl.addOption()\\\" class=\\\"alert alert-info\\\"><h2>No options defined</h2><p class=\\\"lead\\\">Click here to add a new option definition to this field.</p></div><table ng-if=\\\"field.options.length > 0\\\" class=\\\"table-field-options\\\"><thead><tr><th></th><th>Value</th><th>Text</th><th><a href=\\\"\\\" class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"optionsCtrl.addOption()\\\" title=\\\"Add a new option to the list\\\"><i class=\\\"glyphicon glyphicon-plus\\\"></i></a></th><th class=\\\"table-field-options-padding\\\"></th></tr></thead><tbody><tr ng-form=\\\"fieldOptionForm\\\" ng-repeat=\\\"option in field.options\\\" ng-class=\\\"{ \\'error\\': fieldOptionForm.$invalid }\\\"><td ng-if=\\\"multiple === false\\\"><input type=\\\"radio\\\" name=\\\"{{ field.name }}selection[]\\\" value=\\\"{{ option.value }}\\\" ng-model=\\\"field.value\\\"></td><td ng-if=\\\"multiple === true\\\"><input type=\\\"checkbox\\\" name=\\\"{{ field.name }}selection[]\\\" value=\\\"{{ option.value }}\\\" ng-model=\\\"field.value[option.value]\\\"></td><td><input type=\\\"text\\\" name=\\\"optionValue\\\" ng-model=\\\"option.value\\\" ng-required=\\\"true\\\" class=\\\"form-control\\\"></td><td><input type=\\\"text\\\" ng-model=\\\"option.text\\\" class=\\\"form-control\\\"></td><td><a href=\\\"\\\" class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"optionsCtrl.removeOption($index)\\\" title=\\\"Remove this option from the list\\\"><i class=\\\"glyphicon glyphicon-trash\\\"></i></a></td><td></td></tr></tbody></table>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/property-field/common.ng.html', '<div ng-if=\\\"fields.fieldname\\\"><div fg-property-field=\\\"fieldName\\\" fg-property-field-label=\\\"Name\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"fieldName\\\" ng-model=\\\"field.name\\\" ng-required=\\\"true\\\" ng-pattern=\\\"/^[a-zA-Z]([\\\\w]+)?$/\\\" fg-unique-field-name=\\\"\\\"></div></div><div ng-if=\\\"fields.displayname\\\"><div fg-property-field=\\\"displayName\\\" fg-property-field-label=\\\"Display name\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"displayName\\\" ng-model=\\\"field.displayName\\\"></div></div><div ng-if=\\\"fields.placeholder\\\"><div fg-property-field=\\\"fieldPlaceholder\\\" fg-property-field-label=\\\"Placeholder text\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"fieldPlaceholder\\\" ng-model=\\\"field.placeholder\\\"></div></div><div ng-if=\\\"fields.tooltip\\\"><div fg-property-field=\\\"fieldTooltip\\\" fg-property-field-label=\\\"Tooltip\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"fieldTooltip\\\" ng-model=\\\"field.tooltip\\\"></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/property-field/field-value.ng.html', '<div ng-if=\\\"draw\\\"><div fg-property-field=\\\"fieldValue\\\" fg-property-field-label=\\\"Initial value\\\"><div ng-transclude=\\\"\\\"></div></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/property-field/property-field.ng.html', '<div class=\\\"form-group fg-property-field\\\" ng-class=\\\"{ \\'has-error\\': fieldPropertiesForm[fieldName].$invalid }\\\"><label class=\\\"col-sm-5 col-md-4 control-label\\\">{{ fieldLabel }}</label><div class=\\\"col-sm-7 col-md-8\\\"><div ng-transclude=\\\"\\\"></div><div fg-validation-summary=\\\"{{ fieldName }}\\\"></div></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/validation/validation-message.ng.html', '<div ng-form=\\\"valMsgForm\\\"><div fg-property-field=\\\"message\\\" fg-property-field-label=\\\"Message\\\"><input type=\\\"text\\\" name=\\\"message\\\" title=\\\"{{ tooltip }}\\\" placeholder=\\\"Optional message\\\" ng-model=\\\"field.validation.messages[validationType]\\\" class=\\\"form-control\\\"></div></div>');\n  $templateCache.put('angular-form-gen/edit/canvas/field/properties/validation/validation.ng.html', '<div ng-if=\\\"fields.minlength\\\" class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"minlength\\\" fg-property-field-label=\\\"Minimum length\\\"><input type=\\\"text\\\" fg-field-redraw=\\\"\\\" fg-input-number=\\\"\\\" title=\\\"The minimum length of characters that should be entered.\\\" name=\\\"minlength\\\" ng-model=\\\"field.validation.minlength\\\" class=\\\"form-control\\\"></div><div ng-if=\\\"field.validation.minlength >= 1\\\"><div fg-edit-validation-message=\\\"minlength\\\"></div></div></div><div ng-if=\\\"fields.maxlength\\\" class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"maxlength\\\" fg-property-field-label=\\\"Maximum length\\\"><input type=\\\"text\\\" fg-field-redraw=\\\"\\\" fg-input-number=\\\"\\\" title=\\\"The maximum length of characters that should be entered.\\\" name=\\\"maxlength\\\" ng-model=\\\"field.validation.maxlength\\\" class=\\\"form-control\\\"></div><div ng-if=\\\"field.validation.maxlength >= 1\\\"><div fg-edit-validation-message=\\\"maxlength\\\"></div></div></div><div ng-if=\\\"fields.pattern\\\" class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"pattern\\\" fg-property-field-label=\\\"Pattern\\\"><div fg-dropdown-input=\\\"patternOptions\\\" name=\\\"pattern\\\" title=\\\"The pattern that should match with the input value.\\\" fg-parse-pattern=\\\"\\\" fg-field-redraw=\\\"\\\" ng-model=\\\"field.validation.pattern\\\"></div></div><div ng-if=\\\"field.validation.pattern.length > 0\\\"><div fg-edit-validation-message=\\\"pattern\\\"></div></div></div><div ng-if=\\\"fields.required\\\" class=\\\"fg-property-field-validation\\\"><div fg-property-field=\\\"required\\\"><div class=\\\"checkbox\\\"><label title=\\\"Indicates if a value is required for this field.\\\"><input type=\\\"checkbox\\\" ng-model=\\\"field.validation.required\\\">Required</label></div></div><div ng-if=\\\"field.validation.required\\\"><div fg-edit-validation-message=\\\"required\\\"></div></div></div>');\n}]);","fg.directive('fgBindExpression', function ($interpolate) {\r\n\r\n  function buildWatchExpression(interpolateFn) {\r\n    var sb = [];\r\n    var expressions = interpolateFn.expressions;\r\n    var ii = expressions.length;\r\n\r\n    while (ii--) {\r\n      var expression = expressions[ii];\r\n\r\n      if (expression.exp && !expression.exp.match(/^\\s*$/)) {\r\n        sb.push(expression.exp);\r\n      }\r\n    }\r\n\r\n    return '[' + sb.join() + ']';\r\n  }\r\n\r\n  return function (scope, element, attr) {\r\n\r\n    var interpolateFn, watchHandle, oldWatchExpr;\r\n\r\n    function cleanWatchHandle() {\r\n      if (watchHandle) watchHandle();\r\n      watchHandle = undefined;\r\n    }\r\n\r\n    function interpolateExpression() {\r\n      element.text(interpolateFn(scope));\r\n    }\r\n\r\n    scope.$on('$destroy', function () {\r\n      cleanWatchHandle();\r\n    });\r\n\r\n    scope.$watch(attr.fgBindExpression, function (value) {\r\n      if (value !== undefined) {\r\n        interpolateFn = $interpolate(value);\r\n\r\n        element.addClass('ng-binding').data('$binding', interpolateFn);\r\n\r\n        var watchExpr = buildWatchExpression(interpolateFn);\r\n\r\n        if (oldWatchExpr !== watchExpr) {\r\n\r\n          oldWatchExpr = watchExpr;\r\n\r\n          cleanWatchHandle();\r\n\r\n          watchHandle = scope.$watchCollection(watchExpr, function () {\r\n            interpolateExpression();\r\n          });\r\n        } else {\r\n          interpolateExpression();\r\n        }\r\n      }\r\n    });\r\n  };\r\n});\r\n","fg.directive('fgDropdownInput', function ($compile, $document, $timeout, $parse, fgUtils) {\r\n\r\n  function createInput($scope, $element, $attrs) {\r\n\r\n    var template = '<div class=\"fg-dropdown-input input-group\">' +\r\n      '<input type=\"text\" class=\"form-control\"/>' +\r\n      '<span class=\"input-group-btn\">' +\r\n      '<button class=\"btn btn-default\" type=\"button\" ng-click=\"dropdownToggle()\">' +\r\n      '<span class=\"caret\"></span>' +\r\n      '</button>' +\r\n      '</span>' +\r\n      '</div>';\r\n\r\n    var $template = angular.element(template);\r\n    var $input = $template.find('input');\r\n\r\n    // Copy the original attributes to the input element\r\n\r\n    var attributes = $element.prop(\"attributes\");\r\n\r\n    angular.forEach(attributes, function (a) {\r\n      if (a.name !== 'fg-dropdown-input' && a.name !== 'class') {\r\n        $input.attr(a.name, a.value);\r\n      }\r\n    });\r\n\r\n    var $button = $template.find('button');\r\n    var closeTimeout;\r\n\r\n    $scope.dropdownToggle = function () {\r\n//      $button[0].focus(); // force focus for chrome\r\n      $scope.dropdownVisible = !$scope.dropdownVisible;\r\n    };\r\n\r\n//    $button.on('blur', function () {\r\n//      closeTimeout = $timeout(function () {\r\n//        $scope.dropdownVisible = false;\r\n//      }, 100);\r\n//    });\r\n\r\n    $scope.$on('$destroy', function () {\r\n      if (closeTimeout) $timeout.cancel(closeTimeout);\r\n      closeTimeout = undefined;\r\n    });\r\n\r\n    return $template;\r\n  }\r\n\r\n  function createDropdown($scope, $element, $attrs, ngModelCtrl, $input) {\r\n\r\n    var modelGetter = $parse($attrs.ngModel);\r\n    var modelSetter = modelGetter.assign;\r\n\r\n    var template = '<div class=\"fg-dropdown\" ng-class=\"{ \\'open\\': dropdownVisible }\">' +\r\n      '<ul ng-if=\"items && items.length\" class=\"dropdown-menu\">' +\r\n      '<li ng-repeat=\"item in items\" ng-class=\"{ active: item.value === getModelValue() }\">' +\r\n      '<a href=\"\" ng-click=\"setModelValue(item.value)\">{{ item.text || item.value }}</a>' +\r\n      '</li>' +\r\n      '</ul>' +\r\n      '</div>';\r\n\r\n    var $template = angular.element(template);\r\n\r\n    $scope.setModelValue = function (value) {\r\n\r\n      $scope.dropdownVisible = false;\r\n\r\n      // Convert to a string\r\n\r\n      var viewValue = value || '';\r\n\r\n      var idx = ngModelCtrl.$formatters.length;\r\n\r\n      while (idx--) {\r\n        var fn = ngModelCtrl.$formatters[idx];\r\n        var viewValue = fn(viewValue);\r\n\r\n        if (viewValue === undefined) {\r\n          break;\r\n        }\r\n      }\r\n\r\n\r\n      // Parse the viewValue\r\n\r\n      idx = ngModelCtrl.$parsers.length;\r\n      var pv = viewValue;\r\n\r\n      while (idx--) {\r\n        var fn = ngModelCtrl.$parsers[idx];\r\n        pv = fn(pv);\r\n\r\n        if (pv === undefined) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (pv === undefined) {\r\n        // Failed to parse.\r\n        // Set the formatted string in the input, which will retrigger the parsing and display the correct error message.\r\n\r\n        ngModelCtrl.$setViewValue(viewValue);\r\n        ngModelCtrl.$render();\r\n\r\n      } else {\r\n        modelSetter($scope, value);\r\n      }\r\n    };\r\n\r\n    $scope.getModelValue = function () {\r\n      return modelGetter($scope);\r\n    };\r\n\r\n    var input = $input[0];\r\n\r\n    $scope.$watch('dropdownVisible', function (value) {\r\n      if (value) {\r\n\r\n        var rect = input.getBoundingClientRect();\r\n        var scroll = fgUtils.getScrollOffset();\r\n\r\n        $template.css({\r\n          left: (scroll.x + rect.left) + 'px',\r\n          top: (scroll.y + rect.top + input.clientHeight) + 'px',\r\n          width: input.clientWidth + 'px'\r\n        });\r\n      }\r\n    });\r\n\r\n    $scope.$watchCollection($attrs.fgDropdownInput, function (value) {\r\n      $scope.items = value;\r\n    });\r\n\r\n    $scope.$on('$destroy', function () {\r\n      $template.remove();\r\n    });\r\n\r\n    return $template;\r\n  }\r\n\r\n  return {\r\n    priority: 1000,\r\n    restrict: 'A',\r\n    terminal: true,\r\n    scope: true,\r\n    compile: function (tElement, tAttrs) {\r\n\r\n      return function link($scope, $element, $attrs, ctrls) {\r\n\r\n        var $input = createInput($scope, $element, $attrs);\r\n\r\n        $element.append($input);\r\n        $compile($input)($scope);\r\n\r\n        var $inputText = $input.find('input');\r\n        var ngModelCtrl = $inputText.controller('ngModel');\r\n\r\n        ////////////////////////////////////////\r\n\r\n        var $dropdown = createDropdown($scope, $element, $attrs, ngModelCtrl, $input);\r\n        var dropdownCompileFn = $compile($dropdown);\r\n\r\n        var $body = $document.find('body');\r\n\r\n        $body.append($dropdown);\r\n\r\n        dropdownCompileFn($scope);\r\n\r\n        ////////////////////////////////////////\r\n      };\r\n    }\r\n  };\r\n});\r\n","/**\r\n * Created by null on 16/10/14.\r\n */\r\nfg.directive('fgNullForm', function () {\r\n\r\n  var nullFormCtrl = {\r\n    $addControl: angular.noop,\r\n    $removeControl: angular.noop,\r\n    $setValidity: angular.noop,\r\n    $setDirty: angular.noop,\r\n    $setPristine: angular.noop\r\n  };\r\n\r\n  return {\r\n    restrict: 'A',\r\n    require: ['form'],\r\n    link: function link($scope, $element, $attrs, $ctrls) {\r\n\r\n      var form = $ctrls[0];\r\n\r\n      // Locate the parent form\r\n\r\n      var parentForm = $element.parent().inheritedData('$formController');\r\n\r\n      if(parentForm) {\r\n\r\n        // Unregister this form controller\r\n\r\n        parentForm.$removeControl(form);\r\n      }\r\n\r\n      // Nullify the form\r\n\r\n      angular.extend(form, nullFormCtrl);\r\n    }\r\n  };\r\n});\r\n\r\nfg.directive('fgFormRequiredFilter', function() {\r\n\r\n  return {\r\n    restrict: 'A',\r\n    require: ['form'],\r\n    link: function($scope, $element, $attrs, $ctrls) {\r\n\r\n      var form = $ctrls[0];\r\n\r\n      var $setValidity = form.$setValidity;\r\n\r\n      form.$setValidity = function (validationToken, isValid, control) {\r\n\r\n        if(validationToken === 'required') {\r\n          isValid = true;\r\n        }\r\n\r\n        $setValidity.call(form, validationToken, isValid, control);\r\n      };\r\n    }\r\n  };\r\n\r\n});","fg.directive('fgInputNumber', function() {\r\n  return {\r\n    require: 'ngModel',\r\n    link: function(scope, element, attr, ctrl) {\r\n\r\n      ctrl.$parsers.push(function(inputValue) {\r\n        // this next if is necessary for when using ng-required on your input.\r\n        // In such cases, when a letter is typed first, this parser will be called\r\n        // again, and the 2nd time, the value will be undefined\r\n        if (inputValue == undefined) {\r\n          return '';\r\n        }\r\n\r\n        var transformedInput = inputValue.replace(/[^0-9]/g, '');\r\n\r\n        var value = parseInt(transformedInput);\r\n        value === NaN ? undefined : value;\r\n\r\n        if (transformedInput != inputValue) {\r\n          ctrl.$setViewValue(transformedInput);\r\n          ctrl.$render();\r\n        }\r\n\r\n        return value;\r\n\r\n      });\r\n\r\n      ctrl.$parsers.push(function(value) {\r\n        var empty = ctrl.$isEmpty(value);\r\n        if (empty || /^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/.test(value)) {\r\n          ctrl.$setValidity('number', true);\r\n          return value === '' ? null : (empty ? value : parseFloat(value));\r\n        } else {\r\n          ctrl.$setValidity('number', false);\r\n          return undefined;\r\n        }\r\n      });\r\n\r\n      ctrl.$formatters.push(function(value) {\r\n        return ctrl.$isEmpty(value) ? undefined : value.toString();\r\n      });\r\n\r\n      if (attr.min) {\r\n        var minValidator = function(value) {\r\n          var min = parseFloat(attr.min);\r\n          if (!ctrl.$isEmpty(value) && value < min) {\r\n            ctrl.$setValidity('min', false);\r\n            return undefined;\r\n          } else {\r\n            ctrl.$setValidity('min', true);\r\n            return value;\r\n          }\r\n        };\r\n\r\n        ctrl.$parsers.push(minValidator);\r\n        ctrl.$formatters.push(minValidator);\r\n      }\r\n\r\n      if (attr.max) {\r\n        var maxValidator = function(value) {\r\n          var max = parseFloat(attr.max);\r\n          if (!ctrl.$isEmpty(value) && value > max) {\r\n            ctrl.$setValidity('max', false);\r\n            return undefined;\r\n          } else {\r\n            ctrl.$setValidity('max', true);\r\n            return value;\r\n          }\r\n        };\r\n\r\n        ctrl.$parsers.push(maxValidator);\r\n        ctrl.$formatters.push(maxValidator);\r\n      }\r\n\r\n      ctrl.$formatters.push(function(value) {\r\n\r\n        if (ctrl.$isEmpty(value) || angular.isNumber(value)) {\r\n          ctrl.$setValidity('number', true);\r\n          return value;\r\n        } else {\r\n          ctrl.$setValidity('number', false);\r\n          return undefined;\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\r\n","fg.directive('fgPlaceholder', function() {\r\n  /*\r\n    This attribute is only required on TEXTAREA elements. \r\n    Angular in combination with IE doesn't like placeholder=\"{{ myExpression }}\".\r\n   */\r\n  return { \r\n    link: function($scope, $element, $attrs) {\r\n      $scope.$watch($attrs.fgPlaceholder, function(value) {\r\n        $element.attr('placeholder', value);\r\n      });\r\n    }\r\n  };\r\n});","fg.factory('fgUtils', function ($templateCache, $window, fgConfig) {\r\n\r\n    var uniqueCounter = (+new Date) % 10000;\r\n\r\n    return {\r\n      getScrollOffset: function() {\r\n\r\n        // the pageYOffset property of the window object is supported in all browsers except \r\n        // in Internet Explorer before version 9, and always returns the scroll amount regardless of the doctype\r\n        \r\n        // the scrollY property of the window object is supported by Firefox, Google Chrome and Safari, and always\r\n        // returns the scroll amount regardless of the doctype\r\n        \r\n        // if a doctype is specified in the document, the scrollTop property of the html element returns the scroll\r\n        // amount in Internet Explorer, Firefox and Opera, but always returns zero in Google Chrome and Safari\r\n        \r\n        // if no doctype is specified in the document, the scrollTop property of the html element always returns zero\r\n\r\n        // if no doctype is specified in the document, the scrollTop property of the body element returns the \r\n        // scroll amount in Internet Explorer, Firefox, Opera, Google Chrome and Safari.\r\n\r\n        var offset = {};\r\n\r\n        if($window.pageYOffset !== undefined) {\r\n          offset.x = $window.pageXOffset;\r\n          offset.y = $window.pageYOffset;\r\n        } else {\r\n          var de = $window.document.documentElement;\r\n          offset.x = de.scrollLeft;\r\n          offset.y = de.scrollTop;\r\n        }\r\n\r\n        return offset;\r\n      },\r\n      defaultArea: 'default',\r\n      getRenderInfo: function(field) {\r\n        //var renderInfo = fg.Field[field.type];\r\n        var renderInfo = fgConfig.fields.renderInfo[field.type];\r\n\r\n        if(!renderInfo) {\r\n          renderInfo = {};\r\n          // fg.Field[field.type] = renderInfo;\r\n          fgConfig.fields.renderInfo[field.type] = renderInfo;\r\n        }\r\n\r\n        if(!renderInfo.templateUrl) {\r\n          renderInfo.templateUrl = this.getTemplateUrl(field);\r\n        }\r\n\r\n        if(!renderInfo.propertiesTemplateUrl) {\r\n          renderInfo.propertiesTemplateUrl = this.getTemplateUrl(field, 'properties');\r\n        }\r\n\r\n        return renderInfo;\r\n      },\r\n      formatTemplateUrl: function (type, area) {\r\n        return 'angular-form-gen/field-templates/' + (area || this.defaultArea) + '/' + type + '.ng.html';\r\n      },\r\n      getTemplateUrl: function (field, area) {\r\n\r\n        area = area || this.defaultArea;\r\n\r\n        // IE8 fix: Aliases removed\r\n        // var templateType = fgConfig.fields.aliases[field.type] || field.type;\r\n        var templateType = field.type;\r\n        var templateUrl = this.formatTemplateUrl(templateType, area);\r\n\r\n        var cached = $templateCache.get(templateUrl);\r\n\r\n        if (!cached) {\r\n\r\n          // Url is not in cache -- fallback to default area.\r\n          // Properties area will never fallback to default area.\r\n\r\n          if (area !== 'properties' && area !== this.defaultArea) {\r\n            templateUrl = this.getTemplateUrl(field, this.defaultArea);\r\n          } else {\r\n            return this.formatTemplateUrl('not-in-cache');\r\n          }\r\n        }\r\n\r\n        return templateUrl;\r\n      },\r\n      getUnique: function() {\r\n        return ++uniqueCounter;\r\n      },\r\n      copyField: function(field) {\r\n        var copy = angular.copy(field);\r\n        copy.name = 'field' + this.getUnique();\r\n        return copy;\r\n      },\r\n      findElementsByClass: function (root, className, recursive, buffer) {\r\n        buffer = buffer || [];\r\n\r\n        if (root.className === className) {\r\n          buffer.push(root);\r\n        }\r\n\r\n        if (root.hasChildNodes()) {\r\n          for (var i = 0; i < root.children.length; i++) {\r\n            var child = root.children[i];\r\n            if (child.className === className) {\r\n              buffer.push(child);\r\n            }\r\n            if (recursive) {\r\n              this.findElementsByClass(child, className, recursive, buffer);\r\n            }\r\n          }\r\n        }\r\n\r\n        return buffer;\r\n      }\r\n    };\r\n  });","angular.module('dq', []).factory('dqUtils', function($window, $rootScope) {\r\n\r\n  var _dragData = null;\r\n\r\n  //noinspection FunctionWithInconsistentReturnsJS\r\n  return {\r\n    getEvent: function (e) {\r\n      return e && e.originalEvent ? e.originalEvent : e || $window.event;\r\n    },\r\n    stopEvent: function (e) {\r\n      // e.cancelBubble is supported by IE8 -\r\n      // this will kill the bubbling process.\r\n      e.cancelBubble = true;\r\n      e.bubbles = false;\r\n      \r\n      // e.stopPropagation works in modern browsers\r\n      if (e.stopPropagation) e.stopPropagation();\r\n      if (e.preventDefault) e.preventDefault();\r\n\r\n      return false;\r\n    },\r\n    dragData: function (data) {\r\n      if (data === undefined) {\r\n        return _dragData;\r\n      }\r\n      _dragData = data;\r\n    },\r\n    getParentArea: function ($scope) {\r\n      var area = {};\r\n      $scope.$emit('dqLocateArea', area);\r\n      return area.name;\r\n    },\r\n    isAreaMatch: function ($scope) {\r\n      var parentArea = this.getParentArea($scope);\r\n      var eventArea = _dragData ? _dragData.area : \"\";\r\n\r\n      return parentArea === eventArea;\r\n    }\r\n  };\r\n});","angular.module('dq').directive('dqDragArea', function (dqUtils) {\r\n\r\n  function evalBroadcastEvent($scope, args, areaName, expression) {\r\n    if (expression && args && args.area === areaName) {\r\n      $scope.$eval(expression);\r\n    }\r\n  }\r\n\r\n  return {\r\n    restrict: 'AEC',\r\n    link: function ($scope, $element, $attrs) {\r\n\r\n      var areaName = $attrs.dqDragArea || $attrs.dqDragAreaName || \"\";\r\n\r\n      $scope.$on('dqDragBegin', function ($event, args) {\r\n        evalBroadcastEvent($scope, args, areaName, $attrs.dqDragProgressBegin);\r\n      });\r\n\r\n      $scope.$on('dqDragEnd', function ($event, args) {\r\n        evalBroadcastEvent($scope, args, areaName, $attrs.dqDragProgressEnd);\r\n      });\r\n\r\n      $scope.$on('dqLocateArea', function($event, args) {\r\n        args.name = areaName;\r\n        $event.stopPropagation();\r\n      });\r\n    }\r\n  }\r\n});\r\n","angular.module('dq').directive('dqDragEnter',function (dqDragTrack) {\r\n  return {\r\n    link: dqDragTrack\r\n  };\r\n}).directive('dqDragLeave',function (dqDragTrack) {\r\n    return {\r\n      link: dqDragTrack\r\n    };\r\n  }).directive('dqDragOver',function (dqDragTrack) {\r\n    return {\r\n      link: dqDragTrack\r\n    };\r\n  }).directive('dqDrop',function (dqDragTrack) {\r\n    return {\r\n      link: dqDragTrack\r\n    };\r\n  }).factory('dqDragTrack', function (dqUtils, $document) {\r\n\r\n    // Combines both nq-drag-enter & nq-drag-leave & nq-drag-over\r\n\r\n    return function ($scope, $element, $attrs) {\r\n\r\n      // Tracking already set on the element?\r\n\r\n      if ($element.data('dqDragTrack') !== true) {\r\n\r\n        var trackingEnabled = false; // Toggled on drag-begin if the area name does not match the target\r\n        var inbound = false; // Toggle to indicate if the dragging is in or outbound element\r\n        var element = $element[0];\r\n        var dropEffect = 'none'; // Drop effect used in the dragover event\r\n        var doingLeaveDoubleCheck = false; // Toggle that indicates the body has a dragover event to do.\r\n\r\n        var $body = $document.find('body');\r\n\r\n        function dragLeaveDoubleCheck($e) {\r\n          var e = dqUtils.getEvent($e);\r\n\r\n          // Check if the drag over element is a child of the this element\r\n\r\n          var target = e.target || $e.target;\r\n\r\n          if (target !== element) {\r\n\r\n            // TODO: we're not really checking if the target element is visually within the $element.\r\n\r\n            if (!element.contains(target)) {\r\n\r\n              // Drag over element is out of bounds\r\n\r\n              dragLeaveForSure(true);\r\n            }\r\n          }\r\n\r\n          // We're done with the expensive body call\r\n\r\n          $body.off('dragover', dragLeaveDoubleCheck);\r\n\r\n          // Notify the local element event callback there's no event listener on the body and the next event\r\n          // can safely be cancelled.\r\n\r\n          doingLeaveDoubleCheck = false;\r\n\r\n          e.dataTransfer.dropEffect = dropEffect;\r\n\r\n          // Always cancel the dragover -- otherwise the dropEffect is not used.\r\n\r\n          return dqUtils.stopEvent($e);\r\n        }\r\n\r\n        function dragLeaveForSure(apply) {\r\n          inbound = false;\r\n          var expression = $attrs.dqDragLeave;\r\n          if (expression) {\r\n            if (apply) {\r\n              $scope.$apply(function () {\r\n                $scope.$eval(expression);\r\n              });\r\n            } else {\r\n              $scope.$eval(expression);\r\n            }\r\n          }\r\n        }\r\n\r\n        $scope.$on('$destroy', function () {\r\n          // Just to be sure\r\n          $body.off('dragover', dragLeaveDoubleCheck);\r\n        });\r\n\r\n        $scope.$on('dqDragBegin', function () {\r\n          // Check if we should track drag movements\r\n          trackingEnabled = dqUtils.isAreaMatch($scope);\r\n        });\r\n\r\n        $scope.$on('dqDragEnd', function () {\r\n          if (trackingEnabled) {\r\n            // Gief cake\r\n            dragLeaveForSure(false);\r\n          }\r\n        });\r\n\r\n        $element.on('dragenter', function (e) {\r\n          if (trackingEnabled && inbound === false) {\r\n            inbound = true;\r\n            var expression = $attrs.dqDragEnter;\r\n            if (expression) {\r\n              $scope.$apply(function () {\r\n                $scope.$eval(expression);\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        $element.on('dragleave', function () {\r\n          if (trackingEnabled && inbound === true) {\r\n\r\n            // dragleave is a lie -- hovering child elements will cause this event to trigger also.\r\n            // We fake the cake by tracking the drag ourself.\r\n\r\n            // Notify the \"real\" dragover event that he has to play nice with the body and not to\r\n            // cancel the event chain.\r\n\r\n            doingLeaveDoubleCheck = true;\r\n            $body.on('dragover', dragLeaveDoubleCheck);\r\n          }\r\n        });\r\n\r\n        //noinspection FunctionWithInconsistentReturnsJS\r\n        $element.on('dragover', function ($e) {\r\n\r\n          if (trackingEnabled) {\r\n\r\n            var e = dqUtils.getEvent($e);\r\n\r\n            var expression = $attrs.dqDragOver;\r\n            var result;\r\n\r\n            if (expression) {\r\n              $scope.$apply(function () {\r\n                result = $scope.$eval(expression);\r\n              });\r\n            }\r\n\r\n            // The evaluated expression can indicate to cancel the drop\r\n\r\n            dropEffect = result === false ? 'none' : 'copy';\r\n\r\n            if (!doingLeaveDoubleCheck) {\r\n\r\n              // There's no dragover queued on the body.\r\n              // The event needs to be terminated here else the dropEffect will\r\n              // not be applied (and dropping is not allowed).\r\n\r\n              e.dataTransfer.dropEffect = dropEffect;\r\n              return dqUtils.stopEvent($e);\r\n            }\r\n          }\r\n        });\r\n\r\n        //noinspection FunctionWithInconsistentReturnsJS\r\n        $element.on('drop', function($e) {\r\n\r\n          var e = dqUtils.getEvent($e);\r\n\r\n          if(trackingEnabled) {\r\n            var expression = $attrs.dqDrop;\r\n\r\n            if(expression) {\r\n              $scope.$apply(expression);\r\n            }\r\n          }\r\n\r\n          return dqUtils.stopEvent($e);\r\n        });\r\n\r\n        // Ensure that we only do all this magic stuff on this element for one time only.\r\n\r\n        $element.data('dqDragTrack', true);\r\n      }\r\n    };\r\n\r\n  });\r\n","angular.module('dq').directive('dqDraggable', function (dqUtils, $rootScope) {\r\n\r\n  function evalAndBroadcast(eventName, targetArea, $scope, expression, cb) {\r\n    $scope.$apply(function () {\r\n      var data = $scope.$eval(expression);\r\n\r\n      var bcData = {\r\n        area: targetArea,\r\n        data: data\r\n      };\r\n\r\n      cb(bcData);\r\n\r\n      $rootScope.$broadcast(eventName, bcData);\r\n    });\r\n  }\r\n\r\n  return {\r\n    restrict: 'AEC',\r\n    link: function ($scope, $element, $attrs) {\r\n\r\n      var targetArea = $attrs.dqDraggable || $attrs.dqDragTargetArea || \"\";\r\n      var disabled = false;\r\n\r\n      $scope.$watch($attrs.dqDragDisabled, function(value) {\r\n        disabled = value;\r\n        $element.attr('draggable', disabled ? 'false' : 'true');\r\n      });\r\n\r\n      $element.on('selectstart',function (e) {\r\n\r\n        // Pure IE evilness\r\n\r\n        if (!disabled && this.dragDrop) {\r\n          this.dragDrop();\r\n          e = dqUtils.getEvent(e);\r\n          return dqUtils.stopEvent(e);\r\n        }\r\n      }).on('dragstart',function (e) {\r\n\r\n          e = dqUtils.getEvent(e);\r\n\r\n          if(disabled) {\r\n            return dqUtils.stopEvent(e);\r\n          }\r\n\r\n          var dt = e.dataTransfer;\r\n          dt.effectAllowed = 'all';\r\n          dt.setData('Text', 'The cake is a lie!');\r\n\r\n          evalAndBroadcast('dqDragBegin', targetArea, $scope, $attrs.dqDragBegin, function(dragData) {\r\n            dqUtils.dragData(dragData);\r\n          });\r\n\r\n        }).on('dragend', function () {\r\n\r\n          evalAndBroadcast('dqDragEnd', targetArea, $scope, $attrs.dqDragEnd, function() {\r\n            dqUtils.dragData(null);\r\n          });\r\n\r\n        });\r\n    }\r\n  };\r\n\r\n});","fg.controller('fgEditController', function ($scope, fgUtils, $location) {\r\n\r\n  var self = this;\r\n\r\n//  $scope.preview = $location.search().preview;\r\n//\r\n//  this.setMetaForm = function(metaForm) {\r\n//    self.metaForm = metaForm;\r\n//  };\r\n\r\n//  this.togglePreview = function() {\r\n//    $scope.preview = !$scope.preview;\r\n//  };\r\n\r\n  $scope.$watch(function () {\r\n\r\n    var schema = $scope.schemaCtrl.model();\r\n\r\n    // Seems that this watch is sometimes fired after the scope has been destroyed(?)\r\n\r\n    if (schema) {\r\n//      schema.$$_invalid = self.metaForm ? self.metaForm.$invalid : false;\r\n//\r\n//      if (!schema.$$_invalid) {\r\n\r\n      var fields = schema.fields;\r\n\r\n      if (fields) {\r\n\r\n        var i = fields.length;\r\n\r\n        while (--i >= 0 && !schema.$$_invalid) {\r\n          schema.$$_invalid = fields[i].$$_invalid;\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n});","fg.directive('fgEdit', function () {\r\n  return {\r\n    priority: 100,\r\n    require: 'fgSchema',\r\n    restrict: 'AE',\r\n    scope: {\r\n      // // The schema model to edit\r\n      schema: '=?fgSchema'\r\n//      // Boolean indicating wether to show the default form action buttons\r\n//      actionsEnabled: '=?fgActionsEnabled',\r\n//      // Callback function when the user presses save -- any argument named 'schema' is set to the schema model.\r\n//      onSave: '&fgOnSave',\r\n//      // Callback function when the user presses cancel -- any argument named 'schema' is set to the schema model.\r\n//      onCancel: '&fgOnCancel',\r\n//      // Boolean indicating wether the edit is in preview mode or not\r\n//      preview: '=?fgPreview'\r\n    },\r\n    replace: true,\r\n    controller: 'fgEditController as editCtrl',\r\n    templateUrl: 'angular-form-gen/edit/edit.ng.html',\r\n    link: function ($scope, $element, $attrs, schemaCtrl) {\r\n\r\n      if ($scope.schema === undefined) {\r\n        $scope.schema = {};\r\n      }\r\n\r\n//      if ($scope.actionsEnabled === undefined) {\r\n//        $scope.actionsEnabled = true;\r\n//      }\r\n//\r\n//      if ($scope.preview === undefined) {\r\n//        $scope.preview = false;\r\n//      }\r\n\r\n      schemaCtrl.model($scope.schema);\r\n      $scope.schemaCtrl = schemaCtrl;\r\n    }\r\n  }\r\n});","fg.controller('fgFormController', function($scope, $parse) {\r\n\r\n  this.model = {};\r\n  var self = this;\r\n\r\n  this.init = function(dataExpression, schema, state, editMode) {\r\n    // Called by the directive\r\n    \r\n    self.editMode = editMode;\r\n\r\n    var dataGetter = $parse(dataExpression);\r\n    var dataSetter = dataGetter.assign;\r\n\r\n    $scope.$watch(dataGetter, function(value) {\r\n      if(value === undefined) {\r\n        value = {};\r\n\r\n        if(dataSetter) {\r\n          dataSetter($scope, value);\r\n        }\r\n      }\r\n\r\n      self.model.data = value;\r\n    });\r\n\r\n    $scope.$watch(function() {\r\n      return schema.model();\r\n    }, function(value) {\r\n      if(value === undefined) {\r\n        schema.model({});\r\n      } else {\r\n        self.model.schema = value;\r\n      }\r\n    });\r\n\r\n    self.model.state = state;\r\n\r\n    \r\n    return self.model;\r\n  };\r\n\r\n//  this.clearFocusOnFields = function() {\r\n//    angular.forEach(self.model.schema.fields, function(field) {\r\n//      field.focus = false;\r\n//    });\r\n//  };\r\n\r\n});\r\n","fg.directive('fgForm', function(fgFormCompileFn) {\r\n  return {\r\n    restrict: 'AE',\r\n    require: ['^?form', 'fgForm', '^fgSchema'],\r\n    controller: 'fgFormController',\r\n    scope: true,\r\n    compile: fgFormCompileFn\r\n  };\r\n}).factory('fgFormLinkFn', function() {\r\n    return function link($scope, $element, $attrs, ctrls) {\r\n\r\n      var ngFormCtrl = ctrls[0];\r\n      var formCtrl = ctrls[1];\r\n      var schemaCtrl = ctrls[2];\r\n\r\n      var editMode = $attrs.fgNoRender === 'true';\r\n\r\n      formCtrl.init($attrs.fgFormData, schemaCtrl, ngFormCtrl, editMode);\r\n      \r\n    };\r\n}).factory('fgFormCompileFn', function(fgFormLinkFn) {\r\n  return function($element, $attrs) {\r\n\r\n    $element.addClass('fg-form');\r\n\r\n    var noRender = $attrs.fgNoRender;\r\n    \r\n    if (noRender !== 'true') {\r\n      var renderTemplate = '<div fg-form-fields></div>';\r\n      $element.append(renderTemplate);\r\n    }\r\n    \r\n    return fgFormLinkFn;\r\n  };\r\n});\r\n\r\n","fg.directive('fgValidationSummary', function(fgValidationSummaryLinkFn) {\r\n\r\n  return {\r\n    require: ['^?fgField', '^?form'],\r\n    templateUrl: 'angular-form-gen/validation/summary.ng.html',\r\n    scope: {\r\n      fieldName: '@?fgValidationSummary',\r\n      validationMessages: '=?fgValidationMessages'\r\n    },\r\n    link: fgValidationSummaryLinkFn\r\n  };\r\n}).factory('fgValidationSummaryLinkFn', function(fgConfig) {\r\n\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    var fgFieldCtrl = ctrls[0];\r\n    var ngFormController = ctrls[1];\r\n\r\n    if (fgFieldCtrl) {\r\n      // Grab the whole field state from the field controller\r\n      $scope.field = fgFieldCtrl.field();\r\n      $scope.form = fgFieldCtrl.form();\r\n\r\n    } else if (ngFormController) {\r\n      \r\n      $scope.form = {\r\n        state: ngFormController\r\n      };\r\n\r\n      $scope.$watch('fieldName', function(value) {\r\n        $scope.field = {\r\n          name: value,\r\n          state: ngFormController[value]\r\n        };\r\n      });\r\n    }\r\n\r\n    // Whenever the form designer edits a custom message but decides to delete it later a \"\" is leftover.\r\n    // I don't feel like setting all kinds of watchers so we'll fix that here\r\n\r\n    if($scope.validationMessages) {\r\n      angular.forEach($scope.validationMessages, function(value, key) {\r\n        if(!value) {\r\n          delete $scope.validationMessages[key];\r\n        }\r\n      });\r\n    }\r\n\r\n    $scope.messages = angular.extend({}, fgConfig.validation.messages, $scope.validationMessages);\r\n  };\r\n\r\n});","fg.directive('fgUniqueFieldName', function () {\r\n\r\n  var changeTick = 0;\r\n\r\n  function validate(ngModelCtrl, schemaCtrl, field) {\r\n    \r\n    var schema = schemaCtrl.model();\r\n    var valid = true;\r\n    var schemaField;\r\n\r\n    if(schema) {\r\n\r\n      var fields = schema.fields;\r\n\r\n      for (var i = 0; i < fields.length; i++) {\r\n        schemaField = fields[i];\r\n        if (schemaField !== field && field.name === schemaField.name) {\r\n          valid = false;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    ngModelCtrl.$setValidity('unique', valid);\r\n  }\r\n\r\n  return {\r\n    priority: 100,\r\n    require: ['ngModel', '^fgSchema'],\r\n    link: function ($scope, $element, $attrs, ctrls) {\r\n\r\n      var ngModelCtrl = ctrls[0];\r\n      var schemaCtrl = ctrls[1];\r\n      \r\n      var field = $scope.field;\r\n\r\n      if(!field) {\r\n        throw Error('No field property on scope');\r\n      }\r\n\r\n      $scope.$watch(function() { return ngModelCtrl.$modelValue; }, function () {\r\n        \r\n        // Every instance of this directive will increment changeTick\r\n        // whenever the name of the associated field is modified.\r\n\r\n        ++changeTick;\r\n      });\r\n\r\n      $scope.$watch(function() { return changeTick; }, function() {\r\n\r\n        // Every instance of this directive will fire off the validation\r\n        // whenever the changeTick has been modifed.\r\n\r\n        validate(ngModelCtrl, schemaCtrl, field);\r\n      });\r\n    }\r\n  };\r\n});\r\n","fg.controller('fgTabsController', function () {\r\n\r\n  this.items = [];\r\n  this.active = null;\r\n\r\n  this.add = function (item) {\r\n    this.items.push(item);\r\n\r\n    this.items.sort(function(x, y) {\r\n      return x.order - y.order;\r\n    });\r\n\r\n    if (!this.active && item.autoActive != false) {\r\n      this.activate(item);\r\n    }\r\n  };\r\n\r\n  this.activate = function (item) {\r\n\r\n    if(!item.disabled) {\r\n      this.active = item;\r\n    }\r\n\r\n  };\r\n\r\n});\r\n","fg.directive('fgTabs', function() {\r\n  return {\r\n    require: ['fgTabs'],\r\n    restrict: 'EA',\r\n    transclude: true,\r\n    controller: 'fgTabsController',\r\n    templateUrl: 'angular-form-gen/common/tabs/tabs.ng.html',\r\n    scope: {\r\n      'tabs': '=?fgTabs'\r\n    },\r\n    link: function($scope, $element, $attrs, $ctrls) {\r\n      $scope.tabs = $ctrls[0];\r\n    }\r\n  };\r\n});\r\n\r\n\r\n\r\n","fg.directive('fgTabsPane', function(fgTabsPaneLinkFn) {\r\n  return {\r\n    require: ['^fgTabs'],\r\n    restrict: 'EA',\r\n    transclude: true,\r\n    templateUrl: 'angular-form-gen/common/tabs/tabs-pane.ng.html',\r\n    link: fgTabsPaneLinkFn,\r\n    scope: true\r\n  };\r\n}).factory('fgTabsPaneLinkFn', function() {\r\n  return function($scope, $element, $attrs, $ctrls) {\r\n\r\n    $scope.tabs = $ctrls[0];\r\n\r\n    $scope.pane = {\r\n      title: $attrs.fgTabsPane || $attrs.title,\r\n      order: parseInt($attrs.fgTabsPaneOrder || $attrs.order) || 10,\r\n      autoActive: !($attrs.fgTabsPaneAutoActive === \"false\" || $attrs.autoActive === \"false\"),\r\n      renderAlways: $attrs.fgTabsPaneRenderAlways === \"true\" || $attrs.renderAlways === \"true\"\r\n    };\r\n\r\n    $scope.$watch($attrs.disabled, function(value) {\r\n      $scope.pane.disabled = value;\r\n    });\r\n\r\n    $scope.tabs.add($scope.pane);\r\n  };\r\n});\r\n","function fgToJsonReplacer(key, value) {\r\n var val = value;\r\n\r\n if (typeof key === 'string' && key.charAt(0) === '$') {\r\n   val = undefined;\r\n }\r\n return val;\r\n}\r\n\r\nfg.filter('j$on',function () {\r\n  return function (input, displayHidden) {\r\n\r\n    if(displayHidden)\r\n      return JSON.stringify(input || {}, null, '  ');\r\n\r\n    //https://github.com/angular/angular.js/commit/c054288c9722875e3595e6e6162193e0fb67a251#diff-1d54c5f722aebc473dbe96f836ddf974R995\r\n    //return angular.toJson(input || {}, true);\r\n    return JSON.stringify(input || {}, fgToJsonReplacer, '  ');\r\n  };\r\n}).directive('jsonify', function ($window, $filter) {\r\n    return {\r\n      templateUrl: 'angular-form-gen/common/jsonify/jsonify.ng.html',\r\n      replace: true,\r\n      scope: {\r\n        jsonify: \"=\",\r\n        displayHidden: \"@jsonifyDisplayHidden\"\r\n      },\r\n      link: function($scope, $element, $attrs, ctrls) {\r\n        $scope.expression = $attrs.jsonify;\r\n\r\n        $scope.copy = function() {\r\n          $window.prompt (\"Copy to clipboard: Ctrl+C, Enter\", $filter('j$on')($scope.jsonify, $scope.displayHidden));\r\n        };\r\n      }\r\n    };\r\n  });\r\n","fg.controller('fgEditCanvasController', function ($scope, dqUtils, $timeout, fgUtils) {\r\n\r\n  $scope.dragPlaceholder = {\r\n    visible: false,\r\n    index: 0\r\n  };\r\n\r\n  // - - - 8-< - - - - - - - - - - - - - - - - - - - - -\r\n  // Drag & drop\r\n  // - - - 8-< - - - - - - - - - - - - - - - - - - - - -\r\n\r\n  $scope.$on('dqDragBegin', function() {\r\n    $scope.dragging = true;\r\n  });\r\n\r\n  $scope.$on('dqDragEnd', function() {\r\n    $scope.dragging = false;\r\n  });\r\n\r\n  this.dragEnter = function () {\r\n//    $scope.dragging = true;\r\n    $scope.dragPlaceholder.visible = true;\r\n    $scope.dragPlaceholder.index = $scope.schema.fields.length;\r\n  };\r\n\r\n  this.dragLeave = function () {\r\n    $scope.dragPlaceholder.visible = false;\r\n  };\r\n\r\n  this.dragBeginCanvasField = function (index, field) {\r\n\r\n    // Delay is set to prevent browser from copying adjusted html as copy image\r\n\r\n    $timeout(function () {\r\n      field.$_isDragging = true;\r\n    }, 1);\r\n\r\n    return { source: 'canvas', field: field, index: index };\r\n  };\r\n\r\n  this.dragEndCanvasField = function (field) {\r\n\r\n    // IE Fix: ensure this is fired after the drag begin\r\n\r\n    $timeout(function () {\r\n      field.$_isDragging = false;\r\n//      $scope.dragging = false;\r\n    }, 10);\r\n\r\n  };\r\n\r\n  this.drop = function () {\r\n\r\n    var dragData = dqUtils.dragData();\r\n\r\n    if (dragData && dragData.data) {\r\n\r\n      var field = dragData.data.field;\r\n      var source = dragData.data.source;\r\n      var index = dragData.data.index;\r\n      var fields = $scope.schema.fields;\r\n\r\n      if (source == 'palette') {\r\n        $scope.schemaCtrl.addField(field, $scope.dragPlaceholder.index);\r\n\r\n      } else if (source == 'canvas') {\r\n        $scope.schemaCtrl.moveField(index, $scope.dragPlaceholder.index);\r\n\r\n        // fields.splice(index, 1);\r\n        // fields.splice($scope.dragPlaceholder.index, 0, field);\r\n      }\r\n\r\n      // IE fix: not calling dragEnd sometimes\r\n      field.$_isDragging = false;\r\n    } else {\r\n      throw Error('Drop without data');\r\n    }\r\n  };\r\n\r\n});","fg.directive('fgEditCanvas', function() {\r\n\r\n  return {\r\n    require: ['^fgEdit', '^fgSchema', '^form'],\r\n    templateUrl: 'angular-form-gen/edit/canvas/canvas.ng.html',\r\n    controller: 'fgEditCanvasController as canvasCtrl',\r\n    link: function($scope, $element, $attrs, ctrls) {\r\n      $scope.editCtrl = ctrls[0];\r\n      $scope.schemaCtrl = ctrls[1];\r\n      $scope.formCtrl = ctrls[2];\r\n\r\n      var ignoreDirty = true;\r\n\r\n      $scope.$watchCollection('schema.fields', function() {\r\n\r\n        // Ignore the first call, $watchCollection fires at once without any changes.\r\n\r\n        if(!ignoreDirty) {\r\n          $scope.formCtrl.$setDirty(true);\r\n        }\r\n\r\n        ignoreDirty = false;\r\n\r\n      });\r\n    }\r\n  };\r\n});\r\n","fg.controller('fgEditPaletteController', function ($scope, fgConfig) {\r\n\r\n  $scope.templates = angular.copy(fgConfig.fields.templates);\r\n\r\n  var count = 0;\r\n\r\n  $scope.templateFilter = function (template) {\r\n    return !$scope.selectedCategory || $scope.selectedCategory[template.type];\r\n  };\r\n\r\n});","fg.directive('fgEditPalette',function () {\r\n  return {\r\n    require: ['^fgSchema'],\r\n    templateUrl: 'angular-form-gen/edit/palette/palette.ng.html',\r\n    controller: 'fgEditPaletteController',\r\n    link: function($scope, $element, $attrs, ctrls) {\r\n      $scope.schemaCtrl = ctrls[0];\r\n    }\r\n  };\r\n});","fg.controller('fgFieldController', function($scope, fgUtils) {\r\n\r\n  var self = this;\r\n  var _form, _field;\r\n\r\n  this.init = function(fgFormCtrl, fieldSchema, editMode) {\r\n    \r\n    self.initForm(fgFormCtrl);\r\n    self.initField(fieldSchema);\r\n    self.initDefaultData(fieldSchema, editMode);\r\n\r\n    $scope.form = _form;\r\n    $scope.field = _field;\r\n    \r\n  };\r\n\r\n  this.initForm = function(fgFormCtrl) {\r\n    _form = fgFormCtrl ? fgFormCtrl.model : {};\r\n\r\n    return _form;\r\n  };\r\n\r\n  this.initField = function(fieldSchema) {\r\n\r\n    _field = {\r\n      $_id: 'id' + fgUtils.getUnique(),\r\n      schema: fieldSchema\r\n    };\r\n\r\n    $scope.$watch('field.schema.name', function(value, oldValue) {\r\n      self.registerState(value);\r\n    });\r\n\r\n    return _field;\r\n  };\r\n\r\n  this.initDefaultData = function(fieldSchema, editMode) {\r\n\r\n    var fieldName = fieldSchema.name;\r\n\r\n    _form.data = _form.data || {};\r\n    \r\n    if (editMode) {\r\n      \r\n      $scope.$watch('field.schema.value', function(value) {\r\n        _form.data[fieldSchema.name] = value;\r\n      });\r\n\r\n      $scope.$watch('field.schema.name', function(value, oldValue) {\r\n        if(value !== oldValue) {\r\n          var data = _form.data[oldValue];\r\n          delete _form.data[oldValue];\r\n          _form.data[value] = data;\r\n        }\r\n      });\r\n\r\n    } else if (_form.data && _form.data[fieldName] === undefined && fieldSchema.value !== undefined) {\r\n      _form.data[fieldName] = fieldSchema.value;\r\n    }\r\n\r\n    return _form.data;\r\n  };\r\n\r\n  this.setFieldState = function(state) {\r\n    // Called by the field-input directive\r\n    _field.state = state;\r\n    self.registerState(_field.schema.name);\r\n  };\r\n\r\n  this.registerState = function(fieldName) {\r\n    // Re-register the ngModelCtrl with the form controller\r\n    // whenever the name of the field has been modified.\r\n\r\n    if (_form.state && _field.state) {\r\n      _form.state.$removeControl(_field.state);\r\n      _field.state.$name = fieldName;\r\n      _form.state.$addControl(_field.state);\r\n    }\r\n\r\n    _field.name = fieldName;\r\n\r\n  };\r\n\r\n  this.field = function() {\r\n    return _field;\r\n  };\r\n\r\n  this.form = function() {\r\n    return _form;\r\n  };\r\n});","fg.directive('fgField', function(fgFieldLinkFn) {\r\n\r\n  return {\r\n    require: ['^?fgForm', 'fgField'],\r\n    replace: true,\r\n    templateUrl: 'angular-form-gen/form/field/field.ng.html',\r\n    scope: {\r\n      fieldSchema: '=fgField', // The schema definition of the field\r\n      tabIndex: '=?fgTabIndex', // Optional tab index -- used in overlay mode to disable focus\r\n      editMode: '=?fgEditMode', // Indicates edit mode, which will sync the fieldSchema.value\r\n      // to the form data for WYSIWYG pleasures.\r\n      noValidationSummary: '=fgNoValidationSummary' // If true hides the validation summary\r\n    },\r\n    controller: 'fgFieldController',\r\n    link: fgFieldLinkFn\r\n  };\r\n\r\n}).factory('fgFieldLinkFn', function(fgUtils) {\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    var fgFormCtrl = ctrls[0];\r\n    var fgFieldCtrl = ctrls[1];\r\n\r\n    if ($scope.tabIndex === undefined) {\r\n      $scope.tabIndex = 'auto';\r\n    }\r\n\r\n    $scope.renderInfo = fgUtils.getRenderInfo($scope.fieldSchema);\r\n\r\n    fgFieldCtrl.init(fgFormCtrl, $scope.fieldSchema, $scope.editMode);\r\n  };\r\n});","//fg.directive('fgFieldFocus', function($parse) {\r\n//  return {\r\n//    require: ['?^fgForm'],\r\n//    link: function($scope, $element, $attrs, ctrls) {\r\n//\r\n//      var formCtrl = ctrls[0];\r\n//\r\n//      // if(formCtrl && formCtrl.editMode) {\r\n//      //   return;\r\n//      // }\r\n//\r\n//      var e = $element[0];\r\n//\r\n//      var getModel = $parse($attrs.fgFieldFocus);\r\n//      var setModel = getModel.assign;\r\n//\r\n//      $scope.$watch(getModel, function(value) {\r\n//\r\n//        if (value) {\r\n//          if(formCtrl) {\r\n//            formCtrl.clearFocusOnFields();\r\n//            setModel($scope, true);\r\n//\r\n//            if(formCtrl.editMode) {\r\n//              return;\r\n//            }\r\n//          }\r\n//\r\n//          e.focus();\r\n//\r\n//        } else if(formCtrl && !formCtrl.editMode) {\r\n//\r\n//          e.blur();\r\n//\r\n//        }\r\n//      });\r\n//\r\n//      // function onBlur() {\r\n//      //   // if(getModel($scope) !== undefined) {\r\n//      //   //   $timeout(function() {\r\n//      //   //     setModel($scope, false);\r\n//      //   //   });\r\n//      //   // }\r\n//      // }\r\n//\r\n//      // function onFocus() {\r\n//      //   $timeout(function() {\r\n//      //     setModel($scope, true);\r\n//      //   });\r\n//      // }\r\n//\r\n//      // $element.on('focus', onFocus);\r\n//      // $element.on('blur', onBlur);\r\n//\r\n//      // $scope.$on('$destroy', function() {\r\n//      //   $element.off('focus', onFocus);\r\n//      //   $element.off('blur', onBlur);\r\n//      // });\r\n//    }\r\n//  };\r\n//});\r\n","fg.directive('fgFieldInput', function (fgFieldInputLinkFn) {\r\n  return {\r\n    require: ['^fgField', 'ngModel'],\r\n    link: fgFieldInputLinkFn\r\n  };\r\n}).factory('fgFieldInputLinkFn', function () {\r\n  return function ($scope, $element, $attrs, ctrls) {\r\n\r\n    var fgFieldCtrl = ctrls[0];\r\n    var ngModelCtrl = ctrls[1];\r\n\r\n    fgFieldCtrl.setFieldState(ngModelCtrl);\r\n  };\r\n}).factory('fgUpdatePattern', function () {\r\n  //SSchaaf http://stackoverflow.com/questions/20847979/ngpattern-binding-not-working\r\n  //Angular migration https://docs.angularjs.org/guide/migration\r\n  return {\r\n    require: \"^ngModel\",\r\n    link: function (scope, element, attrs, ctrl) {\r\n      scope.$watch(function () {\r\n          // Evaluate the ngPattern attribute against the current scope\r\n          alert(\"attrs.ngPattern\", attrs.ngPattern);\r\n          return scope.$eval(attrs.ngPattern);\r\n        },\r\n        function (newval, oldval) {\r\n          //Get the value from `ngModel`\r\n          alert(\"newval\", newval);\r\n          alert(\"oldval\", oldval);\r\n          value = ctrl.$viewValue;\r\n\r\n          // And set validity on the model to true if the element\r\n          // is empty  or passes the regex test\r\n          if (ctrl.$isEmpty(value) || newval.test(value)) {\r\n            ctrl.$setValidity('pattern', true);\r\n            return value;\r\n          } else {\r\n            ctrl.$setValidity('pattern', false);\r\n            return undefined;\r\n          }\r\n        });\r\n    }\r\n  }\r\n});\r\n","fg.directive('fgFormFields', function() {\r\n\r\n  return {\r\n    require: ['^?fgForm'],\r\n    restrict: 'AE',\r\n    templateUrl: 'angular-form-gen/form/form-fields/form-fields.ng.html',\r\n    scope: {},\r\n    link: function($scope, $element, $attrs, ctrls) {\r\n\r\n      var fgForm = ctrls[0];\r\n\r\n      $scope.$watch(function() {\r\n        return fgForm.model;\r\n      }, function(value) {\r\n        $scope.form = value;\r\n      });\r\n    }\r\n  };\r\n\r\n});","fg.controller('fgSchemaController', function($scope, fgUtils) {\r\n\r\n  var _model;\r\n\r\n  this.model = function(value) {\r\n    if(value !== undefined) {\r\n      _model = value;\r\n\r\n      if(!angular.isArray(value.fields)) {\r\n        value.fields = [];\r\n      }\r\n    }\r\n    \r\n    return _model;\r\n  };\r\n\r\n  this.addField = function(field, index) {\r\n\r\n    var copy = fgUtils.copyField(field);\r\n\r\n    index = index === undefined ? _model.fields.length : index;\r\n    _model.fields.splice(index, 0, copy);\r\n\r\n  };\r\n\r\n  this.removeField = function(index) {\r\n    _model.fields.splice(index, 1);\r\n  };\r\n\r\n  this.swapFields = function(idx1, idx2) {\r\n    if (idx1 <= -1 || idx2 <= -1 || idx1 >= _model.fields.length || idx2 >= _model.fields.length) {\r\n      return;\r\n    }\r\n\r\n    _model.fields[idx1] = _model.fields.splice(idx2, 1, _model.fields[idx1])[0];\r\n  };\r\n\r\n  this.moveField = function(fromIdx, toIdx) {\r\n    if (fromIdx >= 0 && toIdx <= _model.fields.length && fromIdx !== toIdx) {\r\n      var field = _model.fields.splice(fromIdx, 1)[0];\r\n      if (toIdx > fromIdx)--toIdx;\r\n      _model.fields.splice(toIdx, 0, field);\r\n    }\r\n  };\r\n\r\n});","fg.directive('fgSchema', function(fgSchemaLinkFn) {\r\n\r\n  return {\r\n    require: ['fgSchema'],\r\n    controller: 'fgSchemaController',\r\n    link: fgSchemaLinkFn\r\n  };\r\n\r\n}).factory('fgSchemaLinkFn' , function() {\r\n  return function($scope, $element, $attrs, ctrls) {\r\n    var schemaCtrl = ctrls[0];\r\n\r\n    $scope.$watch($attrs.fgSchema, function(value) {\r\n      schemaCtrl.model(value);\r\n    });\r\n\r\n  };\r\n});\r\n\r\n","fg.directive('fgEditCanvasField', function() {\r\n\r\n  return {\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/field.ng.html'\r\n  };\r\n\r\n});","fg.controller('fgEditPaletteCategoriesController', function($scope, fgConfig) {\r\n\r\n  $scope.categories = fgConfig.fields.categories;\r\n\r\n  $scope.setCategory = function(name, category) {\r\n    $scope.categoryName = name;\r\n    $scope.category = category;\r\n  };\r\n\r\n  if(!$scope.category) {\r\n    //noinspection LoopStatementThatDoesntLoopJS\r\n    for (var name in $scope.categories) {\r\n      //noinspection JSUnfilteredForInLoop\r\n      $scope.setCategory(name, $scope.categories[name]);\r\n      break;\r\n    }\r\n  }\r\n});","fg.directive('fgEditPaletteCategories', function () {\r\n  return {\r\n    templateUrl: 'angular-form-gen/edit/palette/categories/categories.ng.html',\r\n    require: '^fgEditPalette',\r\n    scope: {\r\n      category: \"=?\"\r\n    },\r\n    controller: 'fgEditPaletteCategoriesController'\r\n  };\r\n});","fg.directive('fgEditCanvasFieldProperties', function (fgUtils) {\r\n\r\n  // To keep the form validation working, the contents of the tabs needs to be rendered even if the tab is not active.\r\n\r\n  function setRenderAlways(tabItems) {\r\n    var i = tabItems.length;\r\n\r\n    while (i--) {\r\n      var tab = tabItems[i];\r\n\r\n      // Skip the debug tab\r\n\r\n      if(tab.title !== 'Debug') {\r\n        tab.renderAlways = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/properties.ng.html',\r\n    scope: {\r\n      field: '=fgEditCanvasFieldProperties'\r\n    },\r\n    link: {\r\n      pre: function ($scope) {\r\n        $scope.property = {};\r\n      },\r\n      post: function ($scope) {\r\n\r\n        $scope.$watch('fieldPropertiesForm.$invalid', function (newValue) {\r\n          $scope.field.$$_invalid = newValue;\r\n        });\r\n\r\n        $scope.renderInfo = fgUtils.getRenderInfo($scope.field);\r\n\r\n\r\n        $scope.$watch('property.tabs.items.length', function(value) {\r\n          if(value) {\r\n            setRenderAlways($scope.property.tabs.items);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  };\r\n});\r\n","fg.controller('fgPropertyFieldOptionsController', function($scope) {\r\n\r\n  var self = this;\r\n  var optionCounter = 1;\r\n\r\n  // Monitor for changes in the options array and ensure a\r\n  // watch for every option value.\r\n  // Watchers are deleted when removing options from the array.\r\n\r\n  $scope.$watchCollection('field.options', function(options) {\r\n    if (options) {\r\n      angular.forEach(options, function(option) {\r\n        if (!option.$_valueWatchFn) {\r\n          option.$_valueWatchFn = $scope.$watch(function() {\r\n            return option.value;\r\n          }, handleValueChange);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  function handleValueChange(newValue, oldValue) {\r\n\r\n    // Called by the watch collection\r\n    // Ensure that when the selected value is changed, this\r\n    // is synced to the field value.\r\n\r\n    if (newValue !== oldValue) {\r\n      if ($scope.multiple) {\r\n        $scope.field.value[newValue] = $scope.field.value[oldValue];\r\n        delete $scope.field.value[oldValue];\r\n      } else {\r\n        if (oldValue === $scope.field.value) {\r\n          $scope.field.value = newValue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  this.addOption = function() {\r\n\r\n    if (!$scope.field.options) {\r\n      $scope.field.options = [];\r\n    }\r\n\r\n    var option = {\r\n      value: 'Option ' + optionCounter++\r\n    };\r\n\r\n    $scope.field.options.push(option);\r\n\r\n    var count = $scope.field.options.length;\r\n\r\n    if(!$scope.multiple && count === 1) {\r\n      $scope.field.value = option.value;\r\n    }\r\n\r\n  };\r\n\r\n  this.removeOption = function(index) {\r\n    var options = $scope.field.options.splice(index, 1);\r\n\r\n    if (options && options.length) {\r\n\r\n      var option = options[0];\r\n\r\n      if ($scope.multiple) {\r\n\r\n        if($scope.field.value[option.value] !== undefined)\r\n          delete $scope.field.value[option.value];\r\n\r\n      } else {\r\n\r\n        if (option.value === $scope.field.value && $scope.field.options.length) {\r\n          $scope.field.value = $scope.field.options[0].value;\r\n        }\r\n\r\n        option.$_valueWatchFn();\r\n      }\r\n    }\r\n  };\r\n\r\n});","fg.directive('fgPropertyFieldOptions', function(fgPropertyFieldOptionsLinkFn) {\r\n  return {\r\n    scope: true,\r\n    controller: 'fgPropertyFieldOptionsController as optionsCtrl',\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/options/options.ng.html',\r\n    link: fgPropertyFieldOptionsLinkFn\r\n  };\r\n}).factory('fgPropertyFieldOptionsLinkFn', function() {\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    $scope.multiple = false;\r\n\r\n    $attrs.$observe('fgPropertyFieldOptions', function(value) {\r\n      if(value === 'multiple') {\r\n        $scope.multiple = true;\r\n      }\r\n    });\r\n  };\r\n});","fg.directive('fgPropertyFieldCommon', function(fgPropertyFieldCommonLinkFn) {\r\n  return {\r\n    restrict: 'AE',\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/property-field/common.ng.html',\r\n    link: fgPropertyFieldCommonLinkFn\r\n  };\r\n}).factory('fgPropertyFieldCommonLinkFn', function() {\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    $scope.fields = {\r\n      fieldname: false,\r\n      displayname: false,\r\n      placeholder: false,\r\n      tooltip: false,\r\n      focus: false\r\n    };\r\n\r\n    $scope.$watch($attrs['fgPropertyFieldCommon'], function(value) {\r\n      $scope.fields = angular.extend($scope.fields, value);\r\n    });\r\n  };\r\n});","/*\r\n      The field-value directive will re-render itself when certain validation values are modified.\r\n      This is needed because angular does not watch or observe the values of certain attributes and allows\r\n      an invalid initial value to be saved in the form schema.\r\n\r\n      Important: the transcluded form field must be name fieldValue!\r\n\r\n      <div fg-property-field-value>\r\n        <input type=\"text\" \r\n               name=\"fieldValue\" \r\n               ng-model=\"field.value\" \r\n               ng-minlength=\"{{ field.validation.minlength }}\"\r\n               ng-maxlength=\"{{ field.validation.maxlength }}\"\r\n               ng-pattern=\"/{{ field.validation.pattern }}/\"/>\r\n      </div>\r\n\r\n      The fg-field-redraw directive will trigger, on model change, the field-value to re-render itself.\r\n */\r\n\r\nfg.directive('fgPropertyFieldValue', function(fgPropertyFieldValueLinkFn) {\r\n\r\n  return {\r\n    require: ['^form'],\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/property-field/field-value.ng.html',\r\n    transclude: true,\r\n    link: fgPropertyFieldValueLinkFn\r\n  };\r\n\r\n}).factory('fgPropertyFieldValueLinkFn', function($parse) {\r\n\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    $scope.draw = true;\r\n    var frmCtrl = ctrls[0];\r\n    var oldViewValue;\r\n\r\n    $scope.$watch('field.$_redraw', function(value) {\r\n\r\n      if (value) {\r\n\r\n        var ngModelCtrl = frmCtrl['fieldValue'];\r\n\r\n        if(ngModelCtrl) {\r\n          oldViewValue = ngModelCtrl.$viewValue;\r\n        }\r\n\r\n        $scope.draw = false;\r\n        $scope.field.$_redraw = false;\r\n      } else {\r\n        $scope.draw = true;\r\n        $element = $element;\r\n      }\r\n    });\r\n\r\n    $scope.$watch(function() { return frmCtrl['fieldValue']; }, function(ngModelCtrl) {\r\n      if(ngModelCtrl && oldViewValue) {\r\n        ngModelCtrl.$setViewValue(oldViewValue);\r\n        ngModelCtrl.$render();\r\n        oldViewValue = undefined;\r\n      }\r\n    });\r\n  };\r\n}).directive('fgFieldRedraw', function() {\r\n  return {\r\n    require: ['ngModel'],\r\n    link: function($scope, $element, $attrs, ctrls) {\r\n\r\n      var oldValue = $scope.$eval($attrs.ngModel);\r\n\r\n      $scope.$watch($attrs.ngModel, function(value) {\r\n        if(value != oldValue) {\r\n          $scope.field.$_redraw = true;\r\n          oldValue = value;\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\r\n","fg.directive('fgPropertyField', function(fgPropertyFieldLinkFn) {\r\n\r\n  return {\r\n    restrict: 'AE',\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/property-field/property-field.ng.html',\r\n    transclude: true,\r\n    scope: true,\r\n    link: fgPropertyFieldLinkFn\r\n  };\r\n\r\n}).factory('fgPropertyFieldLinkFn', function() {\r\n  return function($scope, $element, $attrs, ctrls) {\r\n    \r\n    $attrs.$observe('fgPropertyField', function(value) {\r\n      $scope.fieldName = value;\r\n    });\r\n\r\n    $attrs.$observe('fgPropertyFieldLabel', function(value) {\r\n      if(value) {\r\n        $scope.fieldLabel = value;\r\n      }\r\n    });\r\n\r\n  };\r\n});","fg.directive('fgParsePattern', function() {\r\n\r\n  return {\r\n    require: ['ngModel'],\r\n    link: function($scope, $element, $attrs, ctrls) {\r\n      var ngModelCtrl = ctrls[0];\r\n\r\n      ngModelCtrl.$parsers.push(validate);\r\n      \r\n      function validate(value) {\r\n        try {\r\n          new RegExp(value);\r\n        } catch(e) {\r\n          ngModelCtrl.$setValidity('pattern', false);\r\n          return undefined;\r\n        }\r\n\r\n        ngModelCtrl.$setValidity('pattern', true);\r\n        return value;\r\n      }\r\n    }\r\n  };\r\n});","fg.directive('fgPropertyFieldValidation', function(fgPropertyFieldValidationLinkFn) {\r\n  return {\r\n    restrict: 'A',\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/validation/validation.ng.html',\r\n    link: fgPropertyFieldValidationLinkFn\r\n  };\r\n}).factory('fgPropertyFieldValidationLinkFn', function(fgConfig) {\r\n\r\n  var patternOptions = [];\r\n  var patternConfig = fgConfig.validation.patterns;\r\n\r\n  angular.forEach(patternConfig, function(value, text) {\r\n    patternOptions.push({ value: value, text: text });\r\n  });\r\n\r\n  return function($scope, $element, $attrs, ctrls) {\r\n\r\n    $scope.patternOptions = patternOptions;\r\n\r\n    $scope.field.validation = $scope.field.validation || {};\r\n    $scope.field.validation.messages = $scope.field.validation.messages || {};\r\n\r\n    $scope.fields = {\r\n      required: false,\r\n      minlength: false,\r\n      maxlength: false,\r\n      pattern: false\r\n    };\r\n\r\n    $scope.$watch($attrs['fgPropertyFieldValidation'], function(value) {\r\n      $scope.fields = angular.extend($scope.fields, value);\r\n    });\r\n  };\r\n});","fg.directive('fgEditValidationMessage', function(fgEditValidationMessageLinkFn) {\r\n  return {\r\n    templateUrl: 'angular-form-gen/edit/canvas/field/properties/validation/validation-message.ng.html',\r\n    link: fgEditValidationMessageLinkFn,\r\n    scope: true\r\n  };\r\n}).factory('fgEditValidationMessageLinkFn', function() {\r\n\r\n  var DEFAULT_TOOLTIP = \"Enter a error message here that will be shown if this validation fails. If this field is empty a default message will be used.\";\r\n  \r\n  return function($scope, $element, $attrs, ctrls) {\r\n    $attrs.$observe('fgEditValidationMessage', function(value) {\r\n      $scope.validationType = value;\r\n    });\r\n\r\n    $attrs.$observe('fgEditValidationTooltip', function(value) {\r\n      value = value || DEFAULT_TOOLTIP;\r\n      $scope.tooltip = value;\r\n    });\r\n  };\r\n});","})(angular);"],"sourceRoot":"../src/angular-form-gen"}